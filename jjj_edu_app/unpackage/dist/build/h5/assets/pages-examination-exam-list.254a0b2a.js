import{_ as a,E as e,B as t,D as s,o as l,a as o,w as i,f as n,d as c,e as r,n as d,b as p,r as _,F as g,i as u,I as m,u as f,h,t as y,p as x}from"./index-911d5a8b.js";import{_ as C}from"./u-icon.06e4a6f5.js";import{r as b}from"./uni-app.es.a09d33e5.js";import{u as k}from"./uni-load-more.3bb687c9.js";const D=a({components:{uniLoadMore:k},data:()=>({searchName:"",category_id:0,categorys:[],list_rows:10,page:1,loading:!1,listData:[],last_page:1,no_more:!1,paper_type:0}),onLoad(a){this.paper_type=a.paper_type||0;let t="真题";1==this.paper_type&&(t="练习"),e({title:t})},mounted(){this.getCategory(),this.getData()},onReachBottom(){let a=this;a.page<a.last_page&&(a.page++,a.getData()),a.no_more=!0},computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},methods:{searchFunc(){},getData(){let a=this,e=a.page,l=a.list_rows;a.loading=!0,t({title:"加载中"}),a._get("paper.Paper/list",{page:e||1,list_rows:l,category_id:a.category_id,paper_type:a.paper_type,search:a.searchName},(function(e){a.listData=a.listData.concat(e.data.list.data),a.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(a.no_more=!0),a.loading=!1,s()}))},getCategory(){let a=this;a._get("paper.Category/index",{type:a.paper_type},(function(e){a.categorys=e.data.list}))},changeCat(a){let e=this;console.log("changeCat called with",a),e.category_id=a,e.page=1,e.listData=[],e.getData(),console.log(e.category_id)}}},[["render",function(a,e,t,s,k,D){const w=u,v=m,F=n,j=b(f("u-icon"),C),z=h("uni-load-more");return l(),o(F,null,{default:i((()=>[c(F,{class:"top-box"},{default:i((()=>[c(F,{class:"top-search"},{default:i((()=>[c(F,{class:"search-box"},{default:i((()=>[c(w,{class:"icon iconfont icon-sousuo"}),c(v,{type:"text",class:"flex-1 search-input",onConfirm:e[0]||(e[0]=a=>D.searchFunc()),modelValue:k.searchName,"onUpdate:modelValue":e[1]||(e[1]=a=>k.searchName=a),placeholder:"请输入..."},null,8,["modelValue"]),c(F,{class:"search-btn",onClick:D.searchFunc},{default:i((()=>[r("搜索")])),_:1},8,["onClick"])])),_:1})])),_:1}),c(F,{class:"top-nav"},{default:i((()=>[c(F,{class:d(["top-nav-item",{active:0==k.category_id}]),onClick:e[2]||(e[2]=a=>D.changeCat(0))},{default:i((()=>[r("全部 ")])),_:1},8,["class"]),(l(!0),p(g,null,_(k.categorys,((a,e)=>(l(),o(F,{key:e,class:d(["top-nav-item",{active:k.category_id==a.category_id}]),onClick:e=>D.changeCat(a.category_id)},{default:i((()=>[r(y(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c(F,{class:"zt-box"},{default:i((()=>[c(F,{class:"zt-list"},{default:i((()=>[(l(!0),p(g,null,_(k.listData,((e,t)=>(l(),o(F,{class:"zt-item",key:t,onClick:t=>a.gotoPage("/pages/examination/exam/detail?paper_id="+e.paper_id)},{default:i((()=>[c(F,{class:"mb10 o-h",style:{"border-radius":"15rpx"}},{default:i((()=>[c(j,{width:"322rpx",height:"180rpx",name:e.image.file_path},null,8,["name"])])),_:2},1024),c(F,{class:"text-ellipsis f26 gray1 mb10"},{default:i((()=>[r(y(e.title),1)])),_:2},1024),c(F,{class:"gray9 f24 mb10"},{default:i((()=>[r(y(e.total_answer)+"人已答题",1)])),_:2},1024),c(F,{class:"d-b-c"},{default:i((()=>[0!=e.money?(l(),o(F,{key:0,class:"f30 dominant fb"},{default:i((()=>[r("￥"+y(e.money),1)])),_:2},1024)):x("",!0),0==e.money?(l(),o(F,{key:1,class:"f30 dominant fb"},{default:i((()=>[r("免费")])),_:1})):x("",!0),c(F,{class:"zt-btn"},{default:i((()=>[c(j,{color:"#F2473F",size:"30rpx",name:"edit-pen"}),r("答题 ")])),_:1})])),_:2},1024)])),_:2},1032,["onClick"])))),128)),c(F,{class:"ww100"},{default:i((()=>[0!=k.listData.length||k.loading?(l(),o(z,{key:1,loadingType:D.loadingType},null,8,["loadingType"])):(l(),o(F,{key:0,class:"d-c-c p30"},{default:i((()=>[c(w,{class:"iconfont icon-wushuju"}),c(w,{class:"cont"},{default:i((()=>[r("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-320727e7"]]);export{D as default};
