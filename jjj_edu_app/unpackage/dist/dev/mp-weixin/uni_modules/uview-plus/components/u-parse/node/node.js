"use strict";const e=require("../../../../../common/vendor.js"),p={},T=()=>Promise.resolve().then(()=>k),y={name:"node",options:{virtualHost:!0},data(){return{ctrl:{},isiOS:e.index.getSystemInfoSync().system.includes("iOS")}},props:{name:String,attrs:{type:Object,default(){return{}}},childs:Array,opts:Array},components:{node:T},mounted(){this.$nextTick(()=>{for(this.root=this.$parent;this.root.$options.name!=="u-parse";this.root=this.root.$parent);})},beforeDestroy(){},methods:{toJSON(){return this},play(c){if(this.root.$emit("play"),this.root.pauseVideo){let i=!1;const a=c.target.id;for(let o=this.root._videos.length;o--;)this.root._videos[o].id===a?i=!0:this.root._videos[o].pause();if(!i){const o=e.index.createVideoContext(a,this);o.id=a,this.root.playbackRate&&o.playbackRate(this.root.playbackRate),this.root._videos.push(o)}}},imgTap(c){const i=this.childs[c.currentTarget.dataset.i];if(i.a){this.linkTap(i.a);return}i.attrs.ignore||(this.root.$emit("imgtap",i.attrs),this.root.previewImg&&e.index.previewImage({showmenu:this.root.showImgMenu,current:parseInt(i.attrs.i),urls:this.root.imgList}))},imgLongTap(c){},imgLoad(c){const i=c.currentTarget.dataset.i;this.childs[i].w?(this.opts[1]&&!this.ctrl[i]||this.ctrl[i]===-1)&&this.$set(this.ctrl,i,1):this.$set(this.ctrl,i,c.detail.width),this.checkReady()},checkReady(){this.root.lazyLoad||(this.root._unloadimgs-=1,this.root._unloadimgs||setTimeout(()=>{this.root.getRect().then(c=>{this.root.$emit("ready",c)}).catch(()=>{this.root.$emit("ready",{})})},350))},linkTap(c){const i=c.currentTarget?this.childs[c.currentTarget.dataset.i]:{},a=i.attrs||c,o=a.href;this.root.$emit("linktap",Object.assign({innerText:this.root.getText(i.children||[])},a)),o&&(o[0]==="#"?this.root.navigateTo(o.substring(1)).catch(()=>{}):o.split("?")[0].includes("://")?this.root.copyLink&&e.index.setClipboardData({data:o,success:()=>e.index.showToast({title:"链接已复制"})}):e.index.navigateTo({url:o,fail(){e.index.switchTab({url:o,fail(){}})}}))},mediaError(c){const i=c.currentTarget.dataset.i,a=this.childs[i];if(a.name==="video"||a.name==="audio"){let o=(this.ctrl[i]||0)+1;if(o>a.src.length&&(o=0),o<a.src.length){this.$set(this.ctrl,i,o);return}}else a.name==="img"&&(this.opts[2]&&this.$set(this.ctrl,i,-1),this.checkReady());this.root&&this.root.$emit("error",{source:a.name,attrs:a.attrs,errMsg:c.detail.errMsg})}}};Array||e.resolveComponent("node")();function x(c,i,a,o,d,l){return{a:e.f(a.childs,(t,r,h)=>e.e({a:t.name==="img"&&!t.t&&(a.opts[1]&&!d.ctrl[r]||d.ctrl[r]<0)},t.name==="img"&&!t.t&&(a.opts[1]&&!d.ctrl[r]||d.ctrl[r]<0)?{b:e.s(t.attrs.style),c:d.ctrl[r]<0?a.opts[2]:a.opts[1]}:{},{d:t.name==="img"&&t.t},t.name==="img"&&t.t?{e:e.s("display:"+t.t),f:"<img class='_img' style='"+t.attrs.style+"' src='"+t.attrs.src+"'>",g:r,h:e.o((...s)=>l.imgTap&&l.imgTap(...s),r)}:t.name==="img"?{j:t.attrs.id,k:e.n("_img "+t.attrs.class),l:e.s((d.ctrl[r]===-1?"display:none;":"")+"width:"+(d.ctrl[r]||1)+"px;height:1px;"+t.attrs.style),m:t.attrs.src,n:t.h?t.w?"":"heightFix":"widthFix",o:a.opts[0],p:t.webp,q:a.opts[3]&&!t.attrs.ignore,r:!a.opts[3]||t.attrs.ignore,s:r,t:e.o((...s)=>l.imgLoad&&l.imgLoad(...s),r),v:e.o((...s)=>l.mediaError&&l.mediaError(...s),r),w:e.o((...s)=>l.imgTap&&l.imgTap(...s),r),x:e.o((...s)=>l.imgLongTap&&l.imgLongTap(...s),r)}:t.text?{z:e.t(t.text),A:a.opts[4]=="force"&&d.isiOS}:t.name==="br"?{}:t.name==="a"?{D:"68720a66-0-"+h,E:e.p({name:"span",childs:t.children,opts:a.opts}),F:t.attrs.id,G:e.n((t.attrs.href?"_a ":"")+t.attrs.class),H:e.s("display:inline;"+t.attrs.style),I:r,J:e.o((...s)=>l.linkTap&&l.linkTap(...s),r)}:t.name==="video"?{L:t.attrs.id,M:e.n(t.attrs.class),N:e.s(t.attrs.style),O:t.attrs.autoplay,P:t.attrs.controls,Q:t.attrs.loop,R:t.attrs.muted,S:t.attrs["object-fit"],T:t.attrs.poster,U:t.src[d.ctrl[r]||0],V:r,W:e.o((...s)=>l.play&&l.play(...s),r),X:e.o((...s)=>l.mediaError&&l.mediaError(...s),r)}:t.name==="audio"?{Z:t.attrs.id,aa:e.n(t.attrs.class),ab:e.s(t.attrs.style),ac:t.attrs.author,ad:t.attrs.controls,ae:t.attrs.loop,af:t.attrs.name,ag:t.attrs.poster,ah:t.src[d.ctrl[r]||0],ai:r,aj:e.o((...s)=>l.play&&l.play(...s),r),ak:e.o((...s)=>l.mediaError&&l.mediaError(...s),r)}:t.name==="table"&&t.c||t.name==="li"?e.e({am:t.name==="li"},t.name==="li"?{an:"68720a66-1-"+h,ao:e.p({childs:t.children,opts:a.opts})}:{ap:e.f(t.children,(s,f,n)=>e.e({a:s.name==="td"||s.name==="th"},s.name==="td"||s.name==="th"?{b:"68720a66-2-"+h+"-"+n,c:e.p({childs:s.children,opts:a.opts})}:{d:e.f(s.children,(m,_,g)=>e.e({a:m.name==="td"||m.name==="th"},m.name==="td"||m.name==="th"?{b:"68720a66-3-"+h+"-"+n+"-"+g,c:e.p({childs:m.children,opts:a.opts}),d:e.n("_"+m.name+" "+m.attrs.class),e:e.s(m.attrs.style)}:{f:e.f(m.children,(u,b,v)=>({a:"68720a66-4-"+h+"-"+n+"-"+g+"-"+v,b:e.p({childs:u.children,opts:a.opts}),c:b,d:e.n("_"+u.name+" "+u.attrs.class),e:e.s(u.attrs.style)})),g:e.n("_"+m.name+" "+m.attrs.class),h:e.s(m.attrs.style)},{i:_}))},{e:f,f:e.n("_"+s.name+" "+s.attrs.class),g:e.s(s.attrs.style)}))},{aq:t.attrs.id,ar:e.n("_"+t.name+" "+t.attrs.class),as:e.s(t.attrs.style)}):t.c?t.c===2?{aB:e.f(t.children,(s,f,n)=>({a:f,b:e.s(s.f),c:"68720a66-5-"+h+"-"+n,d:e.p({name:s.name,attrs:s.attrs,childs:s.children,opts:a.opts})})),aC:t.attrs.id,aD:e.n("_block _"+t.name+" "+t.attrs.class),aE:e.s(t.f+";"+t.attrs.style)}:{aF:e.s(t.f),aG:"68720a66-6-"+h,aH:e.p({name:t.name,attrs:t.attrs,childs:t.children,opts:a.opts})}:{av:t.attrs.id,aw:e.s(t.f+";display:inline"),ax:a.opts[4],ay:a.opts[4],az:[t]},{i:t.name==="img",y:t.text,B:t.name==="br",C:t.name==="a",K:t.name==="video",Y:t.name==="audio",al:t.name==="table"&&t.c||t.name==="li",at:!t.c,aA:t.c===2,aI:r})),b:a.attrs.id,c:e.n("_block _"+a.name+" "+a.attrs.class),d:e.s(a.attrs.style)}}typeof p=="function"&&p(y);const w=e._export_sfc(y,[["render",x],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/uni_modules/uview-plus/components/u-parse/node/node.vue"]]);wx.createComponent(w);const k=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));
