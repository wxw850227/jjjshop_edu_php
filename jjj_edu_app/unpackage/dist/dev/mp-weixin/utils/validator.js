"use strict";const o=require("../common/vendor.js"),c=require("../common/utils.js");function g(r){r.config.globalProperties.getAppId=function(){return o.index.getStorageSync("app_id")||10001},r.config.globalProperties.compareVersion=function(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let i=0;i<n;i++){const s=parseInt(e[i]),l=parseInt(t[i]);if(s>l)return 1;if(s<l)return-1}return 0},r.config.globalProperties.getVisitcode=function(){let e=o.index.getStorageSync("visitcode");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.random()*16|0,i=t=="x"?n:n&3|8;return i.toString(16)}),e=e.replace(/-/g,""),o.index.setStorageSync("visitcode",e)),e},r.config.globalProperties.subMessage=function(e,t){let n=this;const i=o.wx$1.getSystemInfoSync().SDKVersion;e&&e.length!=0&&n.compareVersion(i,"2.8.2")>=0?(o.index.hideLoading(),o.wx$1.requestSubscribeMessage({tmplIds:e,success(s){},fail(s){},complete(s){t()}})):t()},r.config.globalProperties.showError=function(e,t){o.index.showModal({title:"友情提示",content:e,showCancel:!1,success:function(n){t&&t()}})},r.config.globalProperties.showSuccess=function(e,t){o.index.showModal({title:"友情提示",content:e,showCancel:!1,success:function(n){t&&t()}})},r.config.globalProperties.getShareUrlParams=function(e){let t=this;return c.utils.urlEncode(Object.assign({referee_id:t.getUserId(),app_id:t.getAppId()},e))},r.config.globalProperties.getUserId=function(){return o.index.getStorageSync("user_id")},r.config.globalProperties.ios=function(){const e=navigator.userAgent.toLowerCase();return!(e.indexOf("like mac os x")<0||e.match(/MicroMessenger/i)!="micromessenger")},r.config.globalProperties.isWeixin=function(){var e=navigator.userAgent.toLowerCase();return e.match(/MicroMessenger/i)=="micromessenger"},r.config.globalProperties.getPlatform=function(e){return"wx"},r.config.globalProperties.topBarTop=function(){return o.index.getMenuButtonBoundingClientRect().top},r.config.globalProperties.topBarHeight=function(){return o.index.getMenuButtonBoundingClientRect().height},r.config.globalProperties.subPrice=function(e,t){let n=String(e);if(t==1)return n.substring(0,n.indexOf("."));if(t==2){let i=n.indexOf(".");return n.slice(i+1,i+3)}},r.config.globalProperties.convertTwo=function(e){let t="";return e<10?t="0"+e:t=e,t},r.config.globalProperties.yulan=function(e,t){let n=[];Array.isArray(e)?e[0].file_path?e.forEach((s,l)=>{n.push(s.file_path)}):n=e:n=[e];let i=t*1;o.index.previewImage({urls:n,current:i})},r.config.globalProperties.subpoint=function(e,t){let n=String(e);if(t==1)return n.substring(0,n.indexOf("."));if(t==2){let i=n.indexOf(".");return n.slice(i+1,i+3)}}}exports.validator=g;
