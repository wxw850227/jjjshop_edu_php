"use strict";const t=require("../../common/vendor.js"),g=()=>"../../components/uni-load-more.js",c={components:{uniLoadMore:g},data(){return{loading:!0,phoneHeight:0,scrollviewHigh:0,listData:[],no_more:null,list_rows:10,page:1,categorys:[],type_active:0}},computed:{loadingType(){return this.loading?1:this.listData.length!=0&&this.no_more?2:0}},mounted(){this.getData()},methods:{init(){let e=this;t.index.getSystemInfo({success(l){e.phoneHeight=l.windowHeight,t.index.createSelectorQuery().select(".top-tabbar").boundingClientRect(i=>{let o=e.phoneHeight-i&&i.height||0;e.scrollviewHigh=o}).exec()}})},getCategory(){let e=this;e._get("plus.article.article/category",{},function(l){e.categorys=l.data.category})},tabTypeFunc(e){e!=this.type_active&&(this.type_active=e,this.page=1,this.listData=[],this.getData())},getData(){let e=this,l=e.page,n=e.list_rows;e.loading=!0,t.index.showLoading({title:"加载中"}),e._get("plus.article.Article/index",{page:l||1,list_rows:n,category_id:e.type_active},function(i){e.listData=e.listData.concat(i.data.list.data),e.last_page=i.data.list.last_page,i.data.list.last_page<=1&&(e.no_more=!0),e.loading=!1,t.index.hideLoading()})},scrolltolowerFunc(){let e=this;if(e.bottomRefresh=!0,e.page++,e.loading=!0,e.page>e.last_page){e.loading=!1,e.no_more=!0;return}e.getData()},gotoDetail(e){this.gotoPage("/pages/news/detail?article_id="+e)}}};Array||t.resolveComponent("uni-load-more")();function _(e,l,n,i,o,s){return t.e({a:t.f(o.listData,(a,r,d)=>({a:a.image&&a.image.file_path,b:t.t(a.article_title),c:t.t(a.category&&a.category.name),d:t.t(a.view_time),e:t.t(a.create_time),f:r,g:t.o(h=>s.gotoDetail(a.article_id),r)})),b:o.listData.length==0&&!o.loading},o.listData.length==0&&!o.loading?{}:{c:t.p({loadingType:s.loadingType})},{d:e.theme(),e:t.n(e.theme()||"")})}const p=t._export_sfc(c,[["render",_],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/news/list.vue"]]);wx.createPage(p);
