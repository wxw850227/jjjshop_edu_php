"use strict";const a=require("../../common/vendor.js"),_={components:{},data(){return{list_rows:10,page:1,loading:!1,listData:[],last_page:1,no_more:!1,points:0,tabList:[{key:"全部订单",value:0},{key:"已完成",value:2},{key:"进行中",value:1}],dataType:0}},onShow(){this.fetchData()},onLoad(e){},onReachBottom(){let e=this;e.page<e.last_page&&(e.page++,e.getData()),e.no_more=!0},methods:{saveReceipt(e){let s=this;a.index.showLoading({title:"加载中"}),s._get("plus.points.order/receipt",{order_id:e.order_id},l=>{const{msg:n}=l;a.index.showToast(n),s.loading=!1,a.index.hideLoading(),this.fetchData()})},fetchData(){this.listData=[],this.page=1,this.getData()},getData(){let e=this;a.index.showLoading({title:"加载中"}),e._get("plus.points.order/lists",{page:e.page||1,list_rows:e.list_rows,dataType:e.dataType},s=>{e.listData=e.listData.concat(s.data.list.data),e.last_page=s.data.list.last_page,e.points=s.data.points,s.data.list.last_page<=1&&(e.no_more=!0),e.loading=!1,a.index.hideLoading()})},changTab(e){e.value!=this.dataType&&(this.dataType=e.value,this.fetchData())}}};function g(e,s,l,n,i,r){return{a:a.f(i.tabList,(t,d,p)=>({a:a.t(t.key),b:t.value==i.dataType?1:"",c:t,d:a.o(o=>r.changTab(t),t)})),b:a.f(i.listData,(t,d,p)=>a.e({a:t.file_path,b:a.t(t.product_name),c:a.t(t.create_time),d:a.t(t.pay_price),e:a.t(t.points_num)},{f:a.t(t.state_text)},{g:t.delivery_status.value==20&&t.order_status.value==10},t.delivery_status.value==20&&t.order_status.value==10?{h:a.o(o=>r.saveReceipt(t),t)}:{i:a.o(o=>e.gotoPage("/pages/pointsMall/index","reLaunch"),t)},{j:t,k:a.o(o=>e.gotoPage(`/pages/pointsMall/orderDetail?order_id=${t.order_id}`),t)}))}}const u=a._export_sfc(_,[["render",g],["__scopeId","data-v-7bcaa0d8"],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/pointsMall/orderList.vue"]]);wx.createPage(u);
