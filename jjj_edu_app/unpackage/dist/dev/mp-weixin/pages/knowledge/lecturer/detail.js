"use strict";const t=require("../../../common/vendor.js"),u=()=>"../../../components/zs-tab.js",g=()=>"../../../components/empty.js",p={components:{zsTab:u,empty:g},data(){return{lecturer_id:0,detail:{image:{},list:[],content:""},commentParams:{page:1,list_rows:10,last_page:1,no_more:!1},comment_list:[],courseParams:{page:1,list_rows:10,last_page:1,no_more:!1},course_list:[],tabList:[{key:"教师风采",value:0},{key:"在授课程",value:1},{key:"用户评价",value:2}],activeName:0,tabStyle:{background:"transparent",fontSize:"36rpx"}}},onLoad(e){this.lecturer_id=e.lecturer_id,this.getData()},onReachBottom(){let e=this;this.activeName==2?(e.commentParams.page<e.commentParams.last_page&&(e.commentParams.page++,e.getComment()),e.commentParams.no_more=!0):this.activeName==1&&(e.courseParams.page<e.courseParams.last_page&&(e.courseParams.page++,e.getData()),e.courseParams.no_more=!0)},methods:{gotoCourse(e){e.course_type==1?this.gotoPage("/pages/knowledge/course/detail?course_id="+e.course_id):e.course_type==2&&this.gotoPage("/pages/eduadmin/detail?course_id="+e.course_id)},changeTab(e){this.activeName=e.value,e.value==2?(this.comment_list=[],this.commentParams={page:1,list_rows:10,last_page:1,no_more:!1},this.getComment()):e.value==1&&(this.course_list=[],this.courseParams={page:1,list_rows:10,last_page:1,no_more:!1},this.getData())},getData(){let e=this;e.loading=!0,t.index.showLoading({title:"加载中"}),e._get("lecturer.Lecturer/detail",{page:e.courseParams.page||1,list_rows:e.courseParams.list_rows,lecturer_id:e.lecturer_id},o=>{const{data:{detail:r}}=o;e.detail=r,e.course_list=e.course_list.concat(r.list.data),e.courseParams.last_page=r.list.last_page,r.list.last_page<=1&&(e.courseParams.no_more=!0),e.loading=!1,t.index.hideLoading()})},gotoComment(){this.gotoPage(`/pages/order/evaluate?lecturer_id=${this.lecturer_id}`)},getComment(){let e=this;e.loading=!0,t.index.showLoading({title:"加载中"}),e._get("lecturer.Comment/list",{page:e.commentParams.page||1,list_rows:e.commentParams.list_rows,lecturer_id:e.lecturer_id},o=>{e.comment_list=e.comment_list.concat(o.data.list.data),e.commentParams.last_page=o.data.list.last_page,o.data.list.last_page<=1&&(e.commentParams.no_more=!0),e.loading=!1,t.index.hideLoading()})}}};if(!Array){const e=t.resolveComponent("zsTab"),o=t.resolveComponent("u-parse"),r=t.resolveComponent("empty");(e+o+r)()}const d=()=>"../../../uni_modules/uview-plus/components/u-parse/u-parse.js";Math||d();function h(e,o,r,P,a,i){return t.e({a:a.detail.image&&a.detail.image.file_path,b:t.o(i.changeTab),c:t.p({data:a.tabList,activeName:a.activeName,customStyle:a.tabStyle}),d:a.activeName==0},a.activeName==0?{e:t.p({content:a.detail.content})}:{},{f:a.activeName==1},a.activeName==1?{g:t.f(a.course_list,(s,c,n)=>t.e({a:t.t(s.title),b:t.t(s.sectionNum),c:t.f(s.label,(m,l,_)=>({a:t.t(m),b:m})),d:s.isFree==1},s.isFree==1?{}:{e:t.t(s.course_price)},{f:s,g:t.o(m=>i.gotoCourse(s),s)})),h:a.detail.image&&a.detail.image.file_path,i:t.t(a.detail.name)}:{},{j:a.activeName==2},a.activeName==2?t.e({k:a.comment_list&&a.comment_list.length>0},a.comment_list&&a.comment_list.length>0?{l:t.o((...s)=>i.gotoComment&&i.gotoComment(...s)),m:t.f(a.comment_list,(s,c,n)=>t.e({a:s.users.avatarUrl,b:t.t(s.users.nickName),c:s.score==10},s.score==10?{}:{},{d:s.score==20},s.score==20?{}:{},{e:s.score==30},s.score==30?{}:{},{f:t.t(s.create_time),g:t.t(s.content),h:t.f(s.image,(m,l,_)=>({a:m.file_path,b:t.o(v=>e.yulan(s.image,l),l),c:l})),i:c}))}:{},{n:a.comment_list.length==0&&!e.loading},a.comment_list.length==0&&!e.loading?{o:t.o((...s)=>i.gotoComment&&i.gotoComment(...s))}:{}):{})}const f=t._export_sfc(p,[["render",h],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/knowledge/lecturer/detail.vue"]]);wx.createPage(f);
