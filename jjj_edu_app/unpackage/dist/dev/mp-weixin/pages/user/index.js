"use strict";const e=require("../../common/vendor.js"),g={data(){return{sign:{},loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,menus:[],invitation:{},detail:{balance:0,points:0,grade:{name:""}},orderCount:{},coupon:0,setting:{},user_type:"",sessionKey:""}},onShow(){console.log(this.points_name()),this.getData()},onLoad(i){let t=this;i.invitation_id&&e.index.setStorageSync("invitation_id",i.invitation_id),i.referee_id&&e.index.setStorageSync("referee_id",i.referee_id),e.wx$1.login({success(s){t._post("user.user/getSession",{code:s.code},r=>{t.sessionKey=r.data.session_key})}})},methods:{shezhi(){e.index.navigateTo({url:"pages/user/set/set?app_id=10001"})},getData(){let i=this;e.index.showLoading({title:"加载中"}),i._post("user.index/detail",{source:i.getPlatform()},function(t){if(t.data.getPhone){i.gotoPage("/pages/login/bindmobile");return}i.detail=t.data.userInfo,i.sign=t.data.sign,i.coupon=t.data.coupon,i.orderCount=t.data.orderCount,i.menus=t.data.menus,i.invitation=t.data.invitation,i.setting=t.data.setting,i.loadding=!1,e.index.hideLoading()})},bindMobile(){this.gotoPage("/pages/user/modify-phone/modify-phone")},jumpPage(i){this.gotoPage(i)},toinvitation(i){i==0?e.index.showToast({title:"暂无活动"}):this.gotoPage("/pages/user/invite/invite?invitation_gift_id="+i)},getPhoneNumber(i){var t=this;if(console.log(i.detail),i.detail.errMsg!=="getPhoneNumber:ok")return!1;e.index.showLoading({title:"正在提交",mask:!0}),t._post("user.user/bindMobile",{session_key:t.sessionKey,encrypted_data:i.detail.encryptedData,iv:i.detail.iv},s=>{e.index.showToast({title:"绑定成功"}),t.detail.mobile=s.data.mobile},!1,()=>{e.index.hideLoading()})}}};Array||e.resolveComponent("u-icon")();const u=()=>"../../uni_modules/uview-plus/components/u-icon/u-icon.js";Math||u();function l(i,t,s,r,n,a){return e.e({a:!n.loadding},n.loadding?{}:e.e({b:n.detail.avatarUrl,c:e.t(n.detail.nickName),d:e.t(n.detail.user_id),e:e.o(o=>i.gotoPage("pages/user/set/set?app_id=10001")),f:e.p({size:"80rpx",name:"/static/image/order01.png"}),g:e.o(o=>a.jumpPage("/pages/user/collect/subject")),h:e.p({size:"80rpx",name:"/static/image/order02.png"}),i:e.o(o=>a.jumpPage("/pages/order/category")),j:e.p({size:"80rpx",name:"/static/image/order3.png"}),k:e.o(o=>a.jumpPage("/pages/pointsMall/index")),l:e.p({size:"80rpx",name:"/static/image/order04.png"}),m:e.o(o=>a.jumpPage("/pages/user/collect/index")),n:e.o(o=>i.gotoPage("/pages/examination/wrong/list")),o:e.o(o=>i.gotoPage("/pages/examination/record/list")),p:!n.detail.mobile},n.detail.mobile?{}:{q:e.o((...o)=>a.getPhoneNumber&&a.getPhoneNumber(...o))},{r:e.f(n.menus,(o,d,c)=>({a:o.image_url,b:e.t(o.title),c:e.n("item "+o.icon+"-box"),d,e:e.o(m=>a.jumpPage(o.link_url),d)}))}))}const p=e._export_sfc(g,[["render",l],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/user/index.vue"]]);wx.createPage(p);
