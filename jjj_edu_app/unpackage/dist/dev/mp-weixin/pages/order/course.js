"use strict";const a=require("../../common/vendor.js"),p=()=>"../../components/uni-load-more.js",_=()=>"../../components/zs-tab.js",i={components:{uniLoadMore:p,zsTab:_},data(){return{list_rows:10,page:1,loading:!1,listData:[],last_page:1,no_more:!1,tabList:[{key:"全部订单",value:null},{key:"待支付",value:"payment"},{key:"已完成",value:"finish"},{key:"待评价",value:"comment"}],order_type:0,type:null}},onLoad(e){e.order_type&&(this.order_type=e.order_type)},onShow(){this.page=1,this.listData=[],this.getData()},computed:{loadingType(){return this.loading?1:this.listData.length!=0&&this.no_more?2:0}},onReachBottom(){let e=this;e.page<e.last_page&&(e.page++,e.getData()),e.no_more=!0},methods:{getData(){let e=this,l=e.page,r=e.list_rows;e.loading=!0,a.index.showLoading({title:"加载中"}),e._get("user.Order/lists",{order_type:e.order_type,page:l||1,list_rows:r,type:e.type},d=>{e.listData=e.listData.concat(d.data.list.data),e.last_page=d.data.list.last_page,d.data.list.last_page<=1&&(e.no_more=!0),e.loading=!1,a.index.hideLoading()})},deleteFunc(e,l){let r=this;a.index.showModal({title:"提示",content:"确定要删除该订单吗?",success(d){d.confirm&&(r.loading=!0,a.index.showLoading({title:"加载中"}),r._get("user.Order/delete",{order_id:e},o=>{a.index.showModal({content:"删除成功",success(){r.listData.splice(l,1),r.loading=!1,a.index.hideLoading()}})}))}})},changeType(e){this.type!=e.value&&(this.type=e.value,this.listData=[],this.page=1,this.getData())}}};if(!Array){const e=a.resolveComponent("zsTab"),l=a.resolveComponent("uni-load-more");(e+l)()}function g(e,l,r,d,o,u){return a.e({a:a.o(u.changeType),b:a.p({data:o.tabList,activeName:o.type}),c:a.f(o.listData,(t,s,y)=>a.e({a:t.product[0].image.file_path,b:a.t(t.product[0].title),c:a.t(t.product[0].create_time),d:a.t(t.pay_price),e:t.pay_status.value==10},t.pay_status.value==10?{f:a.t(t.pay_status.text)}:t.order_status.value==30&&t.is_comment==0?{}:{h:a.t(t.order_status.text)},{g:t.order_status.value==30&&t.is_comment==0,i:t.pay_status.value==10},t.pay_status.value==10?{j:a.o(n=>e.gotoPage(`/pages/order/cashier?order_id=${t.order_id}&order_type=10&type=course`),s)}:t.order_status&&t.order_status.value==30&&t.is_comment==0?{l:a.o(n=>e.gotoPage(`pages/order/evaluate?order_id=${t.order_id}`),s)}:{},{k:t.order_status&&t.order_status.value==30&&t.is_comment==0,m:t.order_status.value==30},t.order_status.value==30?{n:a.o(n=>e.gotoPage(`/pages/knowledge/course/detail?course_id=${t.product&&t.product[0]&&t.product[0].product_id}`),s)}:{o:a.o(n=>e.gotoPage("/pages/knowledge/index"),s)},{p:t.pay_type.value==10&&t.order_status.value!=30},t.pay_type.value==10&&t.order_status.value!=30?{q:a.o(n=>u.deleteFunc(t.order_id,s),s)}:{},{r:s,s:a.o(n=>e.gotoPage("/pages/order/detail?order_id="+t.order_id),s)})),d:o.listData.length==0&&!o.loading},o.listData.length==0&&!o.loading?{}:{e:a.p({loadingType:u.loadingType})})}const c=a._export_sfc(i,[["render",g],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/order/course.vue"]]);wx.createPage(c);
