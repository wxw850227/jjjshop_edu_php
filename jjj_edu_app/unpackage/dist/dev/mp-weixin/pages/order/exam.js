"use strict";const t=require("../../common/vendor.js"),p=()=>"../../components/uni-load-more.js",g=()=>"../../components/zs-tab.js",_={components:{uniLoadMore:p,zsTab:g},data(){return{list_rows:10,page:1,loading:!1,listData:[],last_page:1,no_more:!1,tabList:[{key:"全部订单",value:"all"},{key:"待支付",value:"payment"},{key:"已完成",value:"finish"}],order_type:0,type:"all"}},onLoad(e){e.order_type&&(this.order_type=e.order_type)},onShow(){this.page=1,this.listData=[],this.getData()},computed:{loadingType(){return this.loading?1:this.listData.length!=0&&this.no_more?2:0}},onReachBottom(){let e=this;e.page<e.last_page&&(e.page++,e.getData()),e.no_more=!0},methods:{getData(){let e=this,l=e.page,s=e.list_rows;e.loading=!0,t.index.showLoading({title:"加载中"}),e._get("user.Order/lists",{order_type:e.order_type,page:l||1,list_rows:s,type:e.type},n=>{e.listData=e.listData.concat(n.data.list.data),e.last_page=n.data.list.last_page,n.data.list.last_page<=1&&(e.no_more=!0),e.loading=!1,t.index.hideLoading()})},deleteFunc(e,l){let s=this;t.index.showModal({title:"提示",content:"确定要删除该订单吗?",success(n){n.confirm&&(s.loading=!0,t.index.showLoading({title:"加载中"}),s._get("user.Order/delete",{order_id:e},o=>{t.index.showModal({content:"删除成功",success(){s.listData.splice(l,1),s.loading=!1,t.index.hideLoading()}})}))}})},changeType(e){this.type!=e.value&&(this.type=e.value,this.listData=[],this.page=1,this.getData())}}};if(!Array){const e=t.resolveComponent("zsTab"),l=t.resolveComponent("uni-load-more");(e+l)()}function u(e,l,s,n,o,d){return t.e({a:t.o(d.changeType),b:t.p({data:o.tabList,activeName:o.type}),c:t.f(o.listData,(a,r,h)=>t.e({a:t.t(a.product&&a.product[0].title),b:t.t(a.pay_price),c:t.t(a.state_text),d:a.pay_status.value==10},a.pay_status.value==10?{e:t.o(i=>e.gotoPage(`/pages/order/cashier?order_id=${a.order_id}&order_type=10&type=paper`),r)}:{f:t.o(i=>e.gotoPage(`/pages/examination/exam/detail?paper_id=${a.product&&a.product[0].product_id}`),r),g:t.o(i=>e.gotoPage("/pages/examination/index"),r)},{h:a.pay_type.value==10&&a.order_status.value!=30},a.pay_type.value==10&&a.order_status.value!=30?{i:t.o(i=>d.deleteFunc(a.order_id,r),r)}:{},{j:r,k:t.o(i=>e.gotoPage("/pages/order/detail?order_id="+a.order_id),r)})),d:o.listData.length==0&&!o.loading},o.listData.length==0&&!o.loading?{}:{e:t.p({loadingType:d.loadingType})})}const c=t._export_sfc(_,[["render",u],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/order/exam.vue"]]);wx.createPage(c);
