"use strict";const a=require("../../common/vendor.js"),d=()=>"../../components/empty.js",h=()=>"../../components/uni-load-more.js",u={components:{uniLoadMore:h,empty:d},data(){return{categoryList:[],category_id:0,loading:!1,page:1,list_rows:10,listData:[],last_page:1,no_more:!1,search:""}},computed:{loadingType(){return this.loading?1:this.listData.length!=0&&this.no_more?2:0}},onShow(){},onLoad(){this.getCategory()},onReachBottom(){let e=this;e.page<e.last_page&&(e.page++,e.getData()),e.no_more=!0},methods:{getCategory(){let e=this;a.index.showLoading({title:"加载中"}),e._get("lecturer.Category/list",{},i=>{const{data:{list:c}}=i;e.categoryList=c,e.fetchData()})},fetchData(){this.page=1,this.category_id=0,this.search="",this.getData()},getData(){let e=this;e._get("lecturer.Lecturer/list",{page:e.page||1,list_rows:e.list_rows,category_id:e.category_id,search:e.search},i=>{e.listData=e.listData.concat(i.data.list.data),e.last_page=i.data.list.last_page,i.data.list.last_page<=1&&(e.no_more=!0),e.loading=!1,a.index.hideLoading()})},gotoDetail(e){this.gotoPage(`/pages/eduadmin/detail?course_id=${e.course_id}`)},searchFunc(){this.listData=[],this.page=1,this.getData()},changeCat(e){e==-1?this.category_id=0:this.category_id=e.category_id,this.listData=[],this.page=1,this.getData()},clickFav(e){let i=this;e.lecturer_id&&i._post("lecturer.Favorite/fav ",{lecturer_id:e.lecturer_id},function(c){e.isFav=e.isFav==1?0:1})}}};if(!Array){const e=a.resolveComponent("empty"),i=a.resolveComponent("uni-load-more");(e+i)()}function p(e,i,c,m,s,o){return a.e({a:s.search,b:a.o(t=>s.search=t.detail.value),c:a.o((...t)=>o.searchFunc&&o.searchFunc(...t)),d:s.category_id==0?1:"",e:a.o(t=>o.changeCat(-1)),f:a.f(s.categoryList,(t,l,n)=>({a:a.t(t.name),b:l,c:s.category_id==t.category_id?1:"",d:a.o(r=>o.changeCat(t),l)})),g:a.f(s.listData,(t,l,n)=>a.e({a:t.image&&t.image.file_path,b:a.t(t.name),c:t.isFav==1},t.isFav==1?{d:a.o(r=>o.clickFav(t),t)}:t.isFav==0?{f:a.o(r=>o.clickFav(t),t)}:{},{e:t.isFav==0,g:a.f(t.star,(r,g,_)=>({a:r})),h:a.f(t.label,(r,g,_)=>({a:a.t(r),b:r})),i:t,j:a.o(r=>e.gotoPage("/pages/knowledge/lecturer/detail?lecturer_id="+t.lecturer_id),t)})),h:s.listData.length==0&&!s.loading},s.listData.length==0&&!s.loading?{}:{i:a.p({loadingType:o.loadingType})})}const f=a._export_sfc(u,[["render",p],["__scopeId","data-v-de198b2a"],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/lecturer/list.vue"]]);wx.createPage(f);
