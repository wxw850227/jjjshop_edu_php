"use strict";const e=require("../../common/vendor.js"),d={data(){return{background:"",listData:[],invitation_id:0}},onLoad(i){this.invitation_id=e.index.getStorageSync("invitation_id")?e.index.getStorageSync("invitation_id"):0},methods:{onNotLogin:function(){e.index.switchTab({url:"/pages/index/index"})},getUserInfo:function(){let i=this;e.wx$1.getUserProfile({lang:"zh_CN",desc:"用于完善会员资料",success:n=>{if(n.errMsg!=="getUserProfile:ok")return!1;e.index.showLoading({title:"正在登录",mask:!0}),e.wx$1.login({success(r){i._post("user.user/login",{invitation_id:i.invitation_id,code:r.code,user_info:n.rawData,encrypted_data:encodeURIComponent(n.encryptedData),iv:encodeURIComponent(n.iv),signature:n.signature,referee_id:e.index.getStorageSync("referee_id"),source:"wx"},o=>{e.index.setStorageSync("token",o.data.token),e.index.setStorageSync("user_id",o.data.user_id),e.index.navigateBack()},!1,()=>{e.index.hideLoading()})}})}})}}};function s(i,n,r,o,g,t){return{a:e.o((...a)=>t.getUserInfo&&t.getUserInfo(...a)),b:e.o((...a)=>t.onNotLogin&&t.onNotLogin(...a))}}const c=e._export_sfc(d,[["render",s],["__file","D:/phpstudy_pro/www3/jjj_edu_small/jjj_edu_app/pages/login/login.vue"]]);wx.createPage(c);
