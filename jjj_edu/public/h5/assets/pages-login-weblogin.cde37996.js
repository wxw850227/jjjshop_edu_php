import{_ as e,J as s,s as l,A as t,B as a,z as o,C as i,D as r,T as n,o as d,a as u,w as p,j as c,f as g,d as _,e as m,p as f,n as b,R as h,i as w,I as v,y}from"./index-4d017ba3.js";const x=e({data:()=>({formData:{mobile:""},loging_password:"",register:{mobile:"",password:"",repassword:""},ip:"",isShow:!0,is_login:1,phoneHeight:0,isRead:!1}),onLoad(){this.getData()},onShow(){this.init()},methods:{returnHome(){s({url:"/pages/index/index"})},init(){let e=this;l({success(s){e.phoneHeight=s.windowHeight}})},getData(){let e=this;e._get("user.userapple/policy",{},(function(s){e.service=s.data.service,e.privacy=s.data.privacy}))},formSubmit(){let e=this,s={mobile:e.formData.mobile},l="";if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.formData.mobile))return console.log(e.formData.mobile),void t({title:"手机有误,请重填！",duration:2e3,icon:"none"});""!=e.loging_password?(s.password=e.loging_password,l="user.useropen/phonelogin",e.isRead?(a({title:"正在提交"}),e._post("user.useropen/phonelogin",s,(s=>{o("token",s.data.token),o("user_id",s.data.user_id);let l="/"+i("currentPage"),t=i("currentPageOptions");if(Object.keys(t).length>0){l+="?";for(let e in t)l+=e+"="+t[e]+"&";l=l.substring(0,l.length-1)}e.gotoPage(l)}),!1,(()=>{r()}))):t({title:"请同意并勾选协议内容",duration:2e3,icon:"none"})):t({title:"密码不能为空！",duration:2e3,icon:"none"})},registerSub(){let e=this;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.register.mobile))return console.log(e.register.mobile),void t({title:"手机有误,请重填！",duration:2e3,icon:"none"});e.register.password.length<6?t({title:"密码至少6位数！",duration:2e3,icon:"none"}):e.register.password===e.register.repassword?e.isRead?(e.register.invitation_id=i("invitation_id")?i("invitation_id"):0,e.register.reg_source="h5",e.register.referee_id=i("referee_id"),a({title:"正在提交"}),e._post("user.useropen/register",e.register,(s=>{t({title:"注册成功",duration:3e3}),e.formData.mobile=e.register.mobile,e.register={mobile:"",password:"",repassword:""},e.is_login=1}),!1,(()=>{r()}))):t({title:"请同意并勾选协议内容",duration:2e3,icon:"none"}):t({title:"两次密码输入不一致！",duration:2e3,icon:"none"})},xieyi(e){let s="";s="service"==e?this.service:this.privacy,n({url:"/pages/webview/webview?url="+s})}}},[["render",function(e,s,l,t,a,o){const i=g,r=w,n=v,x=y;return d(),u(i,{class:"login-container",style:c("height: "+a.phoneHeight+"px;")},{default:p((()=>[_(i,{class:"skip",onClick:o.returnHome},{default:p((()=>[m("跳过→")])),_:1},8,["onClick"]),2==a.is_login?(d(),u(i,{key:0,class:"p-30-75"},{default:p((()=>[_(i,{class:"login_topbpx"},{default:p((()=>[_(i,{class:"login_tit"},{default:p((()=>[m("注册")])),_:1}),_(i,{class:"login_top"},{default:p((()=>[m("已有账户，"),_(r,{class:"dominant",onClick:s[0]||(s[0]=e=>a.is_login=1)},{default:p((()=>[m("立即登录")])),_:1})])),_:1})])),_:1}),_(i,{class:"group-bd"},{default:p((()=>[_(i,{class:"form-level d-s-c"},{default:p((()=>[_(i,{class:"val flex-1 input_botom"},{default:p((()=>[_(n,{type:"text",modelValue:a.register.mobile,"onUpdate:modelValue":s[1]||(s[1]=e=>a.register.mobile=e),placeholder:"请填写手机号",disabled:e.is_send},null,8,["modelValue","disabled"])])),_:1})])),_:1}),_(i,{class:"form-level d-s-c"},{default:p((()=>[_(i,{class:"val flex-1 input_botom"},{default:p((()=>[_(n,{type:"text",password:"true",modelValue:a.register.password,"onUpdate:modelValue":s[2]||(s[2]=e=>a.register.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),_(i,{class:"form-level d-s-c"},{default:p((()=>[_(i,{class:"val flex-1 input_botom"},{default:p((()=>[_(n,{type:"text",password:"true",modelValue:a.register.repassword,"onUpdate:modelValue":s[3]||(s[3]=e=>a.register.repassword=e),placeholder:"请确认密码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),1==a.is_login?(d(),u(i,{key:1,class:"p-30-75"},{default:p((()=>[_(i,{class:"login_topbpx"},{default:p((()=>[_(i,{class:"login_tit"},{default:p((()=>[m("登录")])),_:1}),_(i,{class:"login_top"},{default:p((()=>[m("还没有账号，"),_(r,{class:"dominant",onClick:s[4]||(s[4]=e=>a.is_login=2)},{default:p((()=>[m("立即注册")])),_:1})])),_:1})])),_:1}),_(i,{class:"group-bd"},{default:p((()=>[_(i,{class:"form-level d-s-c"},{default:p((()=>[_(i,{class:"val flex-1 input_botom"},{default:p((()=>[_(n,{type:"text",modelValue:a.formData.mobile,"onUpdate:modelValue":s[5]||(s[5]=e=>a.formData.mobile=e),placeholder:"请填写手机号"},null,8,["modelValue"])])),_:1})])),_:1}),_(i,{class:"form-level d-s-c"},{default:p((()=>[_(i,{class:"val flex-1 input_botom"},{default:p((()=>[_(n,{type:"text",password:"true",modelValue:a.loging_password,"onUpdate:modelValue":s[6]||(s[6]=e=>a.loging_password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),_(i,{onClick:s[9]||(s[9]=e=>a.isRead=!a.isRead),class:"d-s-c gray6 p-0-75 mt20"},{default:p((()=>[_(i,{class:b(a.isRead?"active agreement":"agreement")},null,8,["class"]),m("我已阅读并接受"),_(r,{class:"dominant",onClick:s[7]||(s[7]=h((e=>o.xieyi("service")),["stop"]))},{default:p((()=>[m("《用户协议》")])),_:1}),m("和"),_(r,{class:"dominant",onClick:s[8]||(s[8]=h((e=>o.xieyi("privacy")),["stop"]))},{default:p((()=>[m("《隐私政策》")])),_:1})])),_:1}),2==a.is_login?(d(),u(i,{key:2,style:{"padding-top":"80rpx"},class:"btns p-30-75"},{default:p((()=>[_(x,{onClick:o.registerSub},{default:p((()=>[m("注册")])),_:1},8,["onClick"])])),_:1})):f("",!0),1==a.is_login?(d(),u(i,{key:3,style:{"padding-top":"80rpx"},class:"btns p-30-75"},{default:p((()=>[_(x,{onClick:o.formSubmit},{default:p((()=>[m("登录")])),_:1},8,["onClick"])])),_:1})):f("",!0)])),_:1},8,["style"])}],["__scopeId","data-v-04e3d73d"]]);export{x as default};
