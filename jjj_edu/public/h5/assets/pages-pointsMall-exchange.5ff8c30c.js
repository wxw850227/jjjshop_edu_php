import{_ as a,B as t,D as s,A as e,o as d,a as l,w as i,f as r,d as c,b as o,e as u,t as p,p as m,k as n,u as A,i as h}from"./index-4d017ba3.js";import{_}from"./u-icon.6b7addd3.js";import{r as f}from"./uni-app.es.ef2ad64d.js";import{_ as g}from"./address.d9fd4f59.js";const b=a({data:()=>({loadding:!0,isAddressComplete:!1,params:{pay_source:"",product_id:0,total_num:1},detail:{},address:{},totalPrice:0,temlIds:[]}),onShow(){this.getData()},onLoad(a){this.params.pay_source=this.getPlatform(),a&&a.product_id&&(this.params.product_id=a.product_id),a&&a.total_num&&(this.params.total_num=a.total_num)},watch:{address:{handler(a){this.isAddressComplete=a&&a.name&&a.phone&&a.region},deep:!0}},methods:{getData(){let a=this;t({title:"加载中"}),a._get("plus.points.order/buy",a.params,(function(t){const{data:{order:e}}=t;a.temlIds=t.data.template_arr,a.detail=e,a.address=e.address,a.totalPrice=parseFloat(a.detail.total_price)+parseFloat(a.detail.express_price),a.loadding=!1,s()}))},SubmitOrder(){let a=this;if(!a.isAddressComplete)return void e({icon:"none",title:"请完整填写收货地址"});let t={product_id:this.detail.product_id,total_num:this.params.total_num};a.subMessage(a.temlIds,(function(){a._post("plus.points.order/buy",t,(function(t){let s=`/pages/order/cashier?order_id=${t.data.order_id}&order_type=${t.data.order_type}`;a.gotoPage(s,"reLaunch")}))}))}}},[["render",function(a,t,s,e,b,k){const I=n,Z=r,M=f(A("u-icon"),_),F=h;return d(),l(Z,{class:"wrap"},{default:i((()=>[c(Z,{class:"address"},{default:i((()=>[c(Z,{class:"header",onClick:t[0]||(t[0]=t=>a.gotoPage("/pages/user/address/address"))},{default:i((()=>[c(Z,{class:"l"},{default:i((()=>[b.address?(d(),o("div",{key:0,class:"title"},[c(I,{class:"img",src:g}),u(" 收件信息 ")])):(d(),o("div",{key:1},[c(I,{class:"img",src:g}),u("添加地址")]))])),_:1}),c(Z,{class:"r"},{default:i((()=>[c(M,{width:"12rpx",height:"12rpx",color:"#999999",name:"arrow-right"})])),_:1})])),_:1}),b.address?(d(),l(Z,{key:0,class:"info"},{default:i((()=>[c(Z,{class:"item"},{default:i((()=>[c(Z,{class:"pre"},{default:i((()=>[u("收货人：")])),_:1}),c(Z,{class:"txt"},{default:i((()=>[u(p(b.address?b.address.name:""),1)])),_:1})])),_:1}),c(Z,{class:"item"},{default:i((()=>[c(Z,{class:"pre"},{default:i((()=>[u("手机号：")])),_:1}),c(Z,{class:"txt"},{default:i((()=>[u(p(b.address?b.address.phone:""),1)])),_:1})])),_:1}),c(Z,{class:"item"},{default:i((()=>[c(Z,{class:"pre"},{default:i((()=>[u("收货地址：")])),_:1}),b.isAddressComplete?(d(),l(Z,{key:0,class:"txt"},{default:i((()=>[u(p(b.address?b.address.region.province+b.address.region.city+b.address.region.region+b.address.detail:""),1)])),_:1})):m("",!0)])),_:1})])),_:1})):m("",!0)])),_:1}),c(Z,{class:"product"},{default:i((()=>[c(Z,{class:"title"},{default:i((()=>[u("兑换商品")])),_:1}),c(Z,{class:"productInfo"},{default:i((()=>[c(Z,{class:"masterPic"},{default:i((()=>[c(I,{mode:"scaleToFill",class:"img",src:b.detail.file_path},null,8,["src"])])),_:1}),c(Z,{class:"info"},{default:i((()=>[c(Z,{class:"titleBox"},{default:i((()=>[c(Z,{class:"title"},{default:i((()=>[u(p(b.detail.product_name),1)])),_:1}),c(Z,{class:"num"},{default:i((()=>[u("X"+p(b.params.total_num),1)])),_:1})])),_:1}),c(Z,{class:"price"},{default:i((()=>[u("￥"+p(b.detail.product_price),1)])),_:1})])),_:1})])),_:1}),c(Z,{class:"total"},{default:i((()=>[c(Z,{class:"pre"},{default:i((()=>[u("商品合计")])),_:1}),c(Z,{class:"next"},{default:i((()=>[u("￥"+p(b.detail.total_price),1)])),_:1})])),_:1}),c(Z,{class:"distribution"},{default:i((()=>[c(Z,{class:"pre"},{default:i((()=>[u("配送费用")])),_:1}),c(Z,{class:"next"},{default:i((()=>[u("￥"+p(b.detail.express_price),1)])),_:1})])),_:1}),c(Z,{class:"intro"},{default:i((()=>[c(Z,{class:"txt"},{default:i((()=>[c(I,{class:"img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0N2FlZWQ0YS04YTlhLTc1NDQtYjA5MC1hMDY3Y2VhOGJjOGIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEJFMzJFMjE0RUUyMTFFRTk4RUM4QkZGRTJGOEE0RDEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEJFMzJFMjA0RUUyMTFFRTk4RUM4QkZGRTJGOEE0RDEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YTYyOTFhZDgtNTZiMC1iMTRjLTkxMzQtMjU3NjZkOWNmZTczIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MjRmZjhiZTItNGFiMS1kYTQxLThlMTUtYTEyYjI2MzNhZmQ0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+50xnbAAAA4xJREFUeNrMWEtIFVEYPkdFwushFSuSrE0vSMF0YT56uCjCDFqEiKY9iOgG0aJFGFaLyqSVi9Cd2MNHUATpIkkopDItXUSYvYggCFcZo24ST9/cmTvee2bmzJy5Sg3M/P/h/I/vnv8//3/OpZxz8j89KbJJ7WgxvgBMifHqD42Mk8BVgm7FOA/8BvAZoDMY/wD/Dvxn0EHWPjatAojKVkhrKDaBWKDy8T0JrUPg1xsWTJDEBlp/pkEfQb+DtY+/SBxQfXEUSBaMXgMNOzj1AhX9Ub2gl1jb+BcZoCRPyJzswzsJq2F9oUgUP6cxvDkmknlCa3Q72pnCcHBAnJ7CdwCGVplGSYKgkkHbAKpZOWRa3Y7j8N9hLb8VGuKW6Crh0+kNhO+iL0BabUkhyFi8oWUBdQSguqSAtJqSVAj+NBJZNOQI6g/edgyGML8F/HnwWQqgNgLUV0kdoq2E8yxLKZIXfJHXjUZ/A9VzhN8Bdy5GdhZ8q5VzUXmbrTj9Msek1qpLMyEYlidvTOIaTqcE2SnFRC/VwoUlbrvscowjv6AyBNmcALvvpg2QdrgsxdzmRBFUmiCbGaAklGvholxxhSoM47aQeIEKCbIrAtap/fGAONnuqOgNKk2QDQUsnjsFQDTfVVEOaqUgGwpY0QvEkOVJFd1BrRFyKj1gm2FiyLI9FZ0d5RirYsmm+wu1DVRIXCHqS9HuCDlD18XoZvvPvzjbVMyhX9JaIQe11pRPBp+rtiks23NiyD56FjB3R8yUXx05qhDVnRoZz4ohG/dVVZ0dpZoyaR5tRgbqQ3xz5eS91fS8miKxNdkmNMkZcCd8NmTi0LyfC92eDkJwHhMpAUAVwNETF0d+QT2NCxl7PISkol1KTXFxHj+G1EL/tsIpITZ8E6zjzaS923NyxRL0D+obvnvB9+A9Bv1nAUBdcDx+sL6h75h8qAhqXnA0p3iemmSdo/2yW8dpCC4ogNpkrA4tB98M/oDiearB+5B/cFcVSF/cYd7v4V3pMsAb2d2RFs97GULXb50e1XPKb+3pEcFIL4oAdRXk+jKB6mb3XtcGuLmSJnzPLjGoFtY9XBf0Kq0buAVuW6TWJAbqLfQrWM9wY+D/hxZ3BJ8AFr3WVKHK1qPKViu0mQHM97L7rzoT/zumcrfbbtoMb3tAiyKrR3HToFw/eiyA/w36CeO34EfZg5cjS/aH1b94/gowAIotsUkwtfbcAAAAAElFTkSuQmCC"}),u(" 兑换商品后不支持退换 ")])),_:1}),c(Z,{class:"txt"},{default:i((()=>[u("共1件商品 小计 "),c(F,{class:"flagPrice"},{default:i((()=>[u("￥"+p(b.detail.total_price),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(Z,{class:"bottomFixed"},{default:i((()=>[c(Z,{class:"payBox"},{default:i((()=>[c(Z,{class:"price"},{default:i((()=>[(d(),l(F,{key:0},{default:i((()=>[c(F,{class:"txt"},{default:i((()=>[u("￥")])),_:1}),c(F,null,{default:i((()=>[u(p(b.totalPrice)+"+",1)])),_:1})])),_:1})),c(F,null,{default:i((()=>[u(p(b.detail.total_points),1)])),_:1}),c(F,{class:"txt"},{default:i((()=>[u("积分")])),_:1})])),_:1}),c(Z,{class:"btn",onClick:k.SubmitOrder},{default:i((()=>[u("提交订单")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-978f3d52"]]);export{b as default};
