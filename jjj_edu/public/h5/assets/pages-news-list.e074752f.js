import{_ as t,s as a,c as e,B as s,D as i,o as l,a as o,w as c,n,f as d,d as g,b as r,r as _,F as m,e as u,i as h,h as p,S as f,t as y,k as D}from"./index-db1fe3c3.js";import{u as w}from"./uni-load-more.ed53030d.js";import{_ as b,a as v}from"./time.8ee7e656.js";const k=t({components:{uniLoadMore:w},data:()=>({loading:!0,phoneHeight:0,scrollviewHigh:0,listData:[],no_more:null,list_rows:10,page:1,categorys:[],type_active:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},mounted(){this.getData()},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,e().select(".top-tabbar").boundingClientRect((a=>{let e=t.phoneHeight-a&&a.height||0;t.scrollviewHigh=e})).exec()}})},getCategory(){let t=this;t._get("plus.article.article/category",{},(function(a){t.categorys=a.data.category}))},tabTypeFunc(t){t!=this.type_active&&(this.type_active=t,this.page=1,this.listData=[],this.getData())},getData(){let t=this,a=t.page,e=t.list_rows;t.loading=!0,s({title:"加载中"}),t._get("plus.article.Article/index",{page:a||1,list_rows:e,category_id:t.type_active},(function(a){t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(t.no_more=!0),t.loading=!1,i()}))},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()},gotoDetail(t){this.gotoPage("/pages/news/detail?article_id="+t)}}},[["render",function(t,a,e,s,i,w){const k=D,H=d,x=h,T=p("uni-load-more"),j=f;return l(),o(H,{class:n(["article-list-wrap",t.theme()||""]),"data-theme":t.theme()},{default:c((()=>[g(j,null,{default:c((()=>[(l(!0),r(m,null,_(i.listData,((t,a)=>(l(),o(H,{class:"article-list",key:a,onClick:a=>w.gotoDetail(t.article_id)},{default:c((()=>[g(H,{class:"item"},{default:c((()=>[g(H,{class:"imgbox"},{default:c((()=>[g(k,{class:"data-img",src:t.image&&t.image.file_path,mode:""},null,8,["src"])])),_:2},1024),g(H,{class:"info ml20"},{default:c((()=>[g(H,{class:"title f26"},{default:c((()=>[u(y(t.article_title),1)])),_:2},1024),g(H,{class:"biaqqian redF24"},{default:c((()=>[u(y(t.category&&t.category.name),1)])),_:2},1024),g(H,{class:"timelist"},{default:c((()=>[g(H,{class:"time d-b-c"},{default:c((()=>[g(k,{class:"time-img",src:b,mode:""}),g(H,{class:"gray9"},{default:c((()=>[u(y(t.view_time),1)])),_:2},1024)])),_:2},1024),g(H,{class:"time time d-b-c"},{default:c((()=>[g(k,{class:"time-img",src:v,mode:""}),g(H,{class:"gray9"},{default:c((()=>[u(y(t.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),0!=i.listData.length||i.loading?(l(),o(T,{key:1,loadingType:w.loadingType},null,8,["loadingType"])):(l(),o(H,{key:0,class:"d-c-c p30"},{default:c((()=>[g(x,{class:"iconfont icon-wushuju"}),g(x,{class:"cont"},{default:c((()=>[u("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-6468ec59"]]);export{k as default};
