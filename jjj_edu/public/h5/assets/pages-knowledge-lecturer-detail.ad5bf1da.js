import{_ as a,B as e,D as t,o as s,a as l,w as o,f as c,d as i,p as r,b as m,r as u,F as n,e as _,k as d,h as g,u as p,t as f,i as h}from"./index-db1fe3c3.js";import{_ as k}from"./u-parse.d0690550.js";import{r as y}from"./uni-app.es.bf5e67d0.js";import{z as P}from"./zs-tab.0ea1306f.js";import{e as v}from"./empty.5b1eb601.js";const b=a({components:{zsTab:P,empty:v},data:()=>({lecturer_id:0,detail:{image:{},list:[],content:""},commentParams:{page:1,list_rows:10,last_page:1,no_more:!1},comment_list:[],courseParams:{page:1,list_rows:10,last_page:1,no_more:!1},course_list:[],tabList:[{key:"教师风采",value:0},{key:"在授课程",value:1},{key:"用户评价",value:2}],activeName:0,tabStyle:{background:"transparent",fontSize:"36rpx"}}),onLoad(a){this.lecturer_id=a.lecturer_id,this.getData()},onReachBottom(){let a=this;2==this.activeName?(a.commentParams.page<a.commentParams.last_page&&(a.commentParams.page++,a.getComment()),a.commentParams.no_more=!0):1==this.activeName&&(a.courseParams.page<a.courseParams.last_page&&(a.courseParams.page++,a.getData()),a.courseParams.no_more=!0)},methods:{gotoCourse(a){1==a.course_type?this.gotoPage("/pages/knowledge/course/detail?course_id="+a.course_id):2==a.course_type&&this.gotoPage("/pages/eduadmin/detail?course_id="+a.course_id)},changeTab(a){this.activeName=a.value,2==a.value?(this.comment_list=[],this.commentParams={page:1,list_rows:10,last_page:1,no_more:!1},this.getComment()):1==a.value&&(this.course_list=[],this.courseParams={page:1,list_rows:10,last_page:1,no_more:!1},this.getData())},getData(){let a=this;a.loading=!0,e({title:"加载中"}),a._get("lecturer.Lecturer/detail",{page:a.courseParams.page||1,list_rows:a.courseParams.list_rows,lecturer_id:a.lecturer_id},(e=>{const{data:{detail:s}}=e;a.detail=s,a.course_list=a.course_list.concat(s.list.data),a.courseParams.last_page=s.list.last_page,s.list.last_page<=1&&(a.courseParams.no_more=!0),a.loading=!1,t()}))},gotoComment(){this.gotoPage(`/pages/order/evaluate?lecturer_id=${this.lecturer_id}`)},getComment(){let a=this;a.loading=!0,e({title:"加载中"}),a._get("lecturer.Comment/list",{page:a.commentParams.page||1,list_rows:a.commentParams.list_rows,lecturer_id:a.lecturer_id},(e=>{a.comment_list=a.comment_list.concat(e.data.list.data),a.commentParams.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(a.commentParams.no_more=!0),a.loading=!1,t()}))}}},[["render",function(a,e,t,P,v,b){const C=d,N=c,w=g("zsTab"),T=y(p("u-parse"),k),j=h,z=g("empty");return s(),l(N,{class:"pb100"},{default:o((()=>[i(N,null,{default:o((()=>[i(C,{class:"masterPic",src:v.detail.image&&v.detail.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:1}),i(N,{class:"tabWrap"},{default:o((()=>[i(w,{data:v.tabList,activeName:v.activeName,customStyle:v.tabStyle,onChangTab:b.changeTab},null,8,["data","activeName","customStyle","onChangTab"])])),_:1}),i(N,{class:"content-center"},{default:o((()=>[0==v.activeName?(s(),l(T,{key:0,content:v.detail.content},null,8,["content"])):r("",!0),1==v.activeName?(s(),l(N,{key:1,class:"courseWrap"},{default:o((()=>[i(N,{class:"list"},{default:o((()=>[(s(!0),m(n,null,u(v.course_list,(a=>(s(),l(N,{class:"item",key:a,onClick:e=>b.gotoCourse(a)},{default:o((()=>[i(N,{class:"header"},{default:o((()=>[i(N,{class:"title"},{default:o((()=>[_(f(a.title),1)])),_:2},1024),i(N,{class:"totalTime"},{default:o((()=>[_(f(a.sectionNum)+"课时",1)])),_:2},1024)])),_:2},1024),i(N,{class:"labelList"},{default:o((()=>[(s(!0),m(n,null,u(a.label,(a=>(s(),l(N,{class:"label",key:a},{default:o((()=>[_(f(a),1)])),_:2},1024)))),128))])),_:2},1024),i(N,{class:"intro"},{default:o((()=>[i(N,{class:"tearch"},{default:o((()=>[i(N,{class:"avatar"},{default:o((()=>[i(C,{class:"img",src:v.detail.image&&v.detail.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:1}),i(N,{class:"name"},{default:o((()=>[_(f(v.detail.name),1)])),_:1})])),_:1}),1==a.isFree?(s(),l(N,{key:0,class:"status"},{default:o((()=>[_("免费")])),_:1})):(s(),l(N,{key:1,class:"status"},{default:o((()=>[_(f(a.course_price),1)])),_:2},1024))])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):r("",!0),2==v.activeName?(s(),m(n,{key:2},[v.comment_list&&v.comment_list.length>0?(s(),l(N,{key:0,class:"commenWrap"},{default:o((()=>[i(N,{class:"header"},{default:o((()=>[i(N,{class:"l"}),i(N,{class:"r",onClick:b.gotoComment},{default:o((()=>[_(" 我要评价 ")])),_:1},8,["onClick"])])),_:1}),(s(!0),m(n,null,u(v.comment_list,((e,t)=>(s(),l(N,{key:t,class:"evaluate-list mb18"},{default:o((()=>[i(N,{class:"d-b-c mb18"},{default:o((()=>[i(N,{class:"d-s-c"},{default:o((()=>[i(N,{class:"user-image"},{default:o((()=>[i(C,{src:e.users.avatarUrl,mode:""},null,8,["src"])])),_:2},1024),i(N,{class:"f22 gray9"},{default:o((()=>[_(f(e.users.nickName)+"( ",1),10==e.score?(s(),l(j,{key:0},{default:o((()=>[_("好评")])),_:1})):r("",!0),20==e.score?(s(),l(j,{key:1},{default:o((()=>[_("中评")])),_:1})):r("",!0),30==e.score?(s(),l(j,{key:2},{default:o((()=>[_("差评")])),_:1})):r("",!0),_(" ) ")])),_:2},1024)])),_:2},1024),i(N,{class:"gray9 f22"},{default:o((()=>[_(f(e.create_time),1)])),_:2},1024)])),_:2},1024),i(N,{class:"commentCon"},{default:o((()=>[_(f(e.content),1)])),_:2},1024),i(N,{class:"evaluate-image-list"},{default:o((()=>[(s(!0),m(n,null,u(e.image,((t,c)=>(s(),l(N,{class:"evaluate-image-item",onClick:t=>a.yulan(e.image,c),key:c},{default:o((()=>[i(C,{src:t.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):r("",!0),0!=v.comment_list.length||a.loading?r("",!0):(s(),l(z,{key:1},{default:o((()=>[i(N,{class:"commentBtn",onClick:b.gotoComment},{default:o((()=>[_("去评价")])),_:1},8,["onClick"])])),_:1}))],64)):r("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-0b45e5a9"]]);export{b as default};
