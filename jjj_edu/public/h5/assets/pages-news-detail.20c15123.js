import{_ as a,W as e,C as t,o as s,a as i,w as l,d as o,e as r,R as n,n as c,f as d,i as p,y as h,A as u,B as g,v as f,D as m,p as A,t as _,k as C,h as y}from"./index-db1fe3c3.js";const P=a({components:{AppShare:a({data:()=>({Visible:!1,shareConfig:{},logo:""}),created(){this.getData()},props:["isAppShare","appParams"],watch:{isAppShare:function(a,e){a!=e&&(this.Visible=a)}},methods:{getData(){let a=this;a._get("settings/appShare",{},(function(e){a.shareConfig=e.data.appshare,a.logo=e.data.logo}))},closePopup(a){this.$emit("close")},share:function(a,s){let i={provider:"weixin",scene:s,type:a,success:function(a){console.log("success:"+JSON.stringify(a))},fail:function(a){console.log("fail:"+JSON.stringify(a))}};2!=this.shareConfig.type?(i.summary=this.appParams.summary,i.imageUrl=this.logo,i.title=this.appParams.title,1==this.shareConfig.type?i.href=this.shareConfig.open_site+this.appParams.path:3==this.shareConfig.type&&(1==this.shareConfig.bind_type?i.href=this.shareConfig.down_url:i.href=e.app_url+"/index.php/api/user.useropen/invite?app_id="+e.app_id+"&referee_id="+t("user_id"))):(i.scene="WXSceneSession",i.type=5,i.imageUrl=this.appParams.image?this.appParams.image:this.logo,i.title=this.appParams.title,i.miniProgram={id:this.shareConfig.gh_id,path:this.appParams.path,webUrl:this.shareConfig.web_url,type:0}),uni.share(i)}}},[["render",function(a,e,t,u,g,f){const m=d,A=p,_=h;return s(),i(m,{class:c(["bottom-panel",g.Visible?"bottom-panel open":"bottom-panel close"]),onClick:f.closePopup},{default:l((()=>[o(m,{class:"content",onClick:e[3]||(e[3]=n((()=>{}),["stop"]))},{default:l((()=>[o(m,{class:"module-box module-share"},{default:l((()=>[o(m,{class:"hd d-c-c"},{default:l((()=>[r(" 分享 ")])),_:1}),o(m,{class:"p30 box-s-b"},{default:l((()=>[o(m,{class:"d-c-c"},{default:l((()=>[o(m,{class:"item flex-1 d-c-c d-c"},{default:l((()=>[o(_,{"open-type":"share",onClick:e[0]||(e[0]=a=>f.share(0,"WXSceneSession"))},{default:l((()=>[o(m,{class:"icon-box d-c-c share-friend"},{default:l((()=>[o(A,{class:"iconfont icon-fenxiang"})])),_:1}),o(A,{class:"pt20"},{default:l((()=>[r("微信好友")])),_:1})])),_:1})])),_:1}),o(m,{class:"item flex-1 d-c-c d-c"},{default:l((()=>[o(_,{onClick:e[1]||(e[1]=a=>f.share(0,"WXSenceTimeline"))},{default:l((()=>[o(m,{class:"icon-box d-c-c"},{default:l((()=>[o(A,{class:"iconfont icon-edit"})])),_:1}),o(A,{class:"pt20"},{default:l((()=>[r("微信朋友圈")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(m,{class:"btns"},{default:l((()=>[o(_,{type:"default",onClick:e[2]||(e[2]=a=>f.closePopup(1))},{default:l((()=>[r("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-d1812a71"]])},data:()=>({loadding:!1,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,article_id:0,article:{image:{}},urldata:"",isAppShare:!1,appParams:{title:"",summary:"",path:""}}),onLoad(a){this.article_id=a.article_id,this.urldata=window.location.href},mounted(){this.getData()},onShareAppMessage(){let a=this,e=a.getShareUrlParams({article_id:a.article_id});return{title:a.article.article_title,path:"/pages/news/detail?"+e}},methods:{copyUrl(){var a=document.createElement("input");let e=window.location.href;a.value=e,document.body.appendChild(a),a.select(),a.setSelectionRange(0,a.value.length),document.execCommand("Copy"),document.body.removeChild(a),u({title:"复制成功",icon:"success",mask:!0,duration:2e3})},shareFunc(){this.copyUrl()},closeAppShare(a){this.isAppShare=!1},getData(){let a=this;g({title:"加载中"}),a.loading=!0;let e=a.article_id;a._get("plus.article.article/detail",{article_id:e,url:a.urldata},(function(e){if(e.data.detail.article_content=f.format_content(e.data.detail.article_content),console.log(e.data.detail.article_content),a.article=e.data.detail,""!=a.url){let t={article_id:a.article_id};a.configWx(e.data.share.signPackage,e.data.share.shareParams,t)}a.loadding=!0,m()}))}}},[["render",function(a,e,t,n,u,g){const f=d,m=p,P=C,b=h,S=y("tabBar"),k=y("AppShare");return u.loadding?(s(),i(f,{key:0,"data-theme":a.theme(),class:c([a.theme()||"","article-detail"])},{default:l((()=>[o(f,{class:"title fb"},{default:l((()=>[r(_(u.article.article_title),1)])),_:1}),o(f,{class:"info d-b-c f24"},{default:l((()=>[o(f,null,{default:l((()=>[o(m,{class:"red"},{default:l((()=>[r(_(u.article.category.name),1)])),_:1}),o(m,{class:"ml30"},{default:l((()=>[r(_(u.article.create_time),1)])),_:1})])),_:1}),o(b,{class:"share-box","open-type":"share",onClick:g.shareFunc,style:{margin:"0"}},{default:l((()=>[o(P,{class:"share_img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAC2klEQVRYR+2Yz2sTURDHv7Mbm2yy28TaQ6Gi6aatIOIfYKEeFFFEWg+C/gPSgx4KIkIPeugl4MmDHgQPevMg4rHVi1VPipSeBPPLg1IN/mh2t5E2O/KySbOmP3ZDd3vKnJZ98+Z93sz7NUNwyZ+DvX09PfY1ZkyCMAJAdbfv+M3IE0dOKcXfxXa96pB2xCaeA3DIw94yNRXMIe2CRPyEgaRviDZFZrqaKFQetve3Mup1MO75sVsHMoe1CbL5GQDJ1WkVoO9+jDg6XKoRLmk5Y1Mfa1QZxLr8FKDB/+1xHwDN/Y9WRrV+eZ1zBPQ6dvGRGNOxorFAgO0fyL8mA1TV1fsMTLX3IjOjzhJjptHwQaka4/QVln/znWluA1NpeopWdXWJgWPCLDGNK4XKQmdD+NfeGoazgHQZ4MN1BktXqwCiDKzE80aKRNBCkO1g4nnzlqVrRTdQA4BK8XwlHQKLmOEWa4azAkaMt6dAXjB7CuQHxgFS3wAYA6gk1lAoIfMLI4CMdGKAJLookzQfClAnMJvOoaA9tBuY5rYPLGS7hQkUKAiYwICCggkEKAgY8RrgdXlCJmlu17vM0hNZgG62dkvrBPZ76lu6+hbACQBfAgBSvwEYaLyJNq4DvzCBn9TOa5CnieiRkjNmOwFp6u7pXeYHsAvk5aWuh7oe8vKAV3t3DXl7SC018/6NNAhARckbybDSoO2gGJBXddUUqZhgEECLAI47iSJOKgXjtdeMgmyv6onTNmjesUnvydTVOwTcbgyyqJiJMVpeFsShy099fzKKtXcEHHUcQjMkakL7euwcgFT9J7BEzDeiBfMVAbUwqESYrEz8DFi624QBUP5rR0accozee55gv2grx6wRwik6MJAAEHFNtiaBz8by5stWwSoTP0csPQbQH4ZXdrBZlsBXBEwjQi3VX+lUKibVphj2JJiGQTgQEtwPMD5DoudKJPqAPpVFOaYu/wDhHb9RoARKUwAAAABJRU5ErkJggg==",mode:""})])),_:1},8,["onClick"])])),_:1}),o(f,{class:"article-content",innerHTML:u.article.article_content},null,8,["innerHTML"]),o(S),o(k,{isAppShare:u.isAppShare,appParams:u.appParams,onClose:g.closeAppShare},null,8,["isAppShare","appParams","onClose"])])),_:1},8,["data-theme","class"])):A("",!0)}],["__scopeId","data-v-f84fdbe4"]]);export{P as default};
