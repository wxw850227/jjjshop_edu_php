import{E as e,d as a,e as l,f as t,c as i,l as o,m as s,n,o as r,v as d}from"./element-plus-fe2e4fed.js";import{D as c}from"./data-97822b17.js";import{_ as u}from"./index-2e57a1f5.js";import{o as m,T as p,S as h,a as g,P as f,W as C,$ as b,Y as _}from"./@vue-0361ad4a.js";const y={class:"common-seach-wrap"},S={class:"product-content"},w={class:"table-wrap"},z=["src"],k={class:"pagination"},D={class:"dialog-footer"};const V=u({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},cateList:[],listData:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["iscourse","excludeIds","islist","course_type"],watch:{iscourse:function(e,a){e!=a&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,a=e.formInline;a.page=e.curPage,a.list_rows=e.pageSize,a.course_type=e.course_type,c.coursesList(a,!0).then((a=>{1==a.code&&(e.loading=!1,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?a.data.list.data.forEach((a=>{e.excludeIds.indexOf(a.course_id)>-1?a.noChoose=!1:a.noChoose=!0})):e.islist||a.data.list.data.forEach((e=>{e.noChoose=!0})),e.listData=a.data.list.data,e.totalDataNumber=a.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let a=this,l=null;a.multipleSelection.length<1?e({message:"请至少选择一件产品课程！",type:"error"}):(a.islist&&void 0!==a.islist?(a.multipleSelection.forEach((e=>{e.image=e.image?e.image.file_path:""})),l=a.multipleSelection):(l=a.multipleSelection,l.image=l.image?l.image.file_path:""),a.params=l,a.type="success",a.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,c,u,V,x,v){const I=a,F=l,P=t,j=i,E=o,L=s,N=n,U=r,W=d;return m(),p(U,{title:"选择课程",modelValue:x.dialogVisible,"onUpdate:modelValue":c[2]||(c[2]=e=>x.dialogVisible=e),onClose:v.dialogFormVisible,"modal-append-to-body":!0,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:h((()=>[g("div",D,[f(P,{size:"small",onClick:c[1]||(c[1]=e=>x.dialogVisible=!1)},{default:h((()=>[C("取 消")])),_:1}),f(P,{size:"small",type:"primary",onClick:v.addClerk},{default:h((()=>[C("确 定")])),_:1},8,["onClick"])])])),default:h((()=>[g("div",y,[f(j,{inline:!0,size:"small",model:x.formInline,class:"demo-form-inline"},{default:h((()=>[f(F,{label:"课程名称"},{default:h((()=>[f(I,{placeholder:"请输入课程名称",modelValue:x.formInline.search,"onUpdate:modelValue":c[0]||(c[0]=e=>x.formInline.search=e)},null,8,["modelValue"])])),_:1}),f(F,{label:""},{default:h((()=>[f(P,{icon:"Search",onClick:v.getData},{default:h((()=>[C("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),g("div",S,[g("div",w,[b((m(),p(L,{size:"small",data:x.listData,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:v.tableCurrentChange},{default:h((()=>[f(E,{width:"70",label:"课程图片"},{default:h((e=>[g("img",{src:e.row.image&&e.row.image.file_path,width:"30",height:"30"},null,8,z)])),_:1}),f(E,{prop:"title",label:"课程名称"}),f(E,{prop:"category.name",width:"100",label:"课程分类"}),f(E,{prop:"create_time",width:"140",label:"添加时间"}),u.islist?(m(),p(E,{key:0,type:"selection",selectable:v.selectableFunc,width:"44"},null,8,["selectable"])):_("",!0),u.islist?_("",!0):(m(),p(E,{key:1,width:"80",label:"单选"},{default:h((e=>[e.row.noChoose?(m(),p(P,{key:0,size:"mini",onClick:a=>v.SingleFunc(e.row)},{default:h((()=>[C("选择")])),_:2},1032,["onClick"])):(m(),p(P,{key:1,size:"mini",disabled:""},{default:h((()=>[C("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[W,x.loading]])]),g("div",k,[f(N,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,background:"","current-page":x.curPage,"page-sizes":[2,10,20,50,100],"page-size":x.pageSize,layout:"total, prev, pager, next, jumper",total:x.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{V as _};
