import{a as e,E as t,d as s,e as a,f as o,c as l,l as i,m as r,n,v as d}from"./element-plus-fe2e4fed.js";import{L as p}from"./live-4f34f8e4.js";import u from"./Audit-c09b00cc.js";import c from"./Products-c5b04e2d.js";import m from"./Edit-b0b401eb.js";import h from"./Gift-c05cd9c4.js";import{_}from"./index-2e57a1f5.js";import{ae as g,ap as f,o as b,c as j,a as w,P as C,S as v,W as k,$ as y,T as z,Y as x,X as M}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const P={class:"list"},S={class:"common-seach-wrap"},L={class:"product-content"},T={class:"table-wrap"},D={class:"text-ellipsis"},G={key:0,class:"red"},E={key:0,class:"picture-box d-c-c"},A=["src"],F={key:0,class:"fb green"},N={key:0,class:"fb green"},V={key:0,class:"fb gray"},R={key:1,class:"fb red"},q={class:"user-info d-s-c"},I={class:"ml10"},U={class:"pagination"};const W=_({components:{Audit:u,Products:c,Edit:m,Gift:h},inject:["reload"],data:()=>({loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,searchForm:{search:""},open_edit:!1,curModel:{},open_product:!1,open_audit:!1,open_gift:!1}),created(){this.getTableList()},methods:{searchSubmit(){this.curPage=1,this.getTableList()},handleCurrentChange(e){let t=this;t.curPage=e,t.loading=!0,t.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,t={page:e.curPage,list_rows:e.pageSize,username:e.searchForm.search};p.getRoom(t,!0).then((t=>{e.loading=!1,e.tableData=t.data.list.data,e.totalDataNumber=t.data.list.total})).catch((e=>{}))},deleteClick(s){let a=this;e.confirm("删除后不可恢复，确认删除该记录吗?","提示",{type:"warning"}).then((()=>{p.deleteRoom({room_id:s.room_id}).then((e=>{t({message:"删除成功",type:"success"}),a.getTableList()}))}))},auditClick(e){this.curModel=e,this.open_audit=!0},closeAudit(){this.open_audit=!1,this.getTableList()},showProduct(e){this.curModel=e,this.open_product=!0},closeProducts(){this.open_product=!1},showGift(e){this.curModel=e,this.open_gift=!0},closeGift(){this.open_gift=!1},editClick(e){this.curModel=e,this.open_edit=!0},closeEdit(){this.open_edit=!1,this.getTableList()}}},[["render",function(e,t,p,u,c,m){const h=s,_=a,W=o,X=l,Y=i,$=r,B=n,H=g("Audit"),J=g("Products"),K=g("Edit"),O=g("Gift"),Q=f("auth"),Z=d;return b(),j("div",P,[w("div",S,[C(X,{size:"small",inline:!0,model:c.searchForm,class:"demo-form-inline"},{default:v((()=>[C(_,null,{default:v((()=>[C(h,{size:"small",modelValue:c.searchForm.search,"onUpdate:modelValue":t[0]||(t[0]=e=>c.searchForm.search=e),placeholder:"请输入用户名和真实姓名"},null,8,["modelValue"])])),_:1}),C(_,null,{default:v((()=>[C(W,{size:"small",type:"primary",icon:"Search",onClick:m.searchSubmit},{default:v((()=>[k("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),w("div",L,[w("div",T,[y((b(),z($,{size:"small",data:c.tableData,border:"",style:{width:"100%"}},{default:v((()=>[C(Y,{prop:"name",label:"标题"},{default:v((e=>[w("div",D,[1==e.row.is_top?(b(),j("span",G,"[置顶]")):x("",!0),k(M(e.row.name),1)])])),_:1}),C(Y,{prop:"share_img_id",label:"封面"},{default:v((e=>[e.row.share_img_id>0?(b(),j("div",E,[w("img",{src:e.row.share.file_path,alt:"封面"},null,8,A)])):x("",!0)])),_:1}),C(Y,{prop:"virtual_num",label:"虚拟人数",width:"70"}),C(Y,{prop:"status_text",label:"直播状态"}),C(Y,{prop:"status_text",label:"开播时间"},{default:v((e=>[103==e.row.live_status||101==e.row.live_status?(b(),j("span",F,M(e.row.real_start_time_text),1)):x("",!0)])),_:1}),C(Y,{prop:"status_text",label:"结束时间"},{default:v((e=>[103==e.row.live_status?(b(),j("span",N,M(e.row.real_end_time_text),1)):x("",!0)])),_:1}),C(Y,{label:"房间状态"},{default:v((e=>[1==e.row.is_delete?(b(),j("span",V,"隐藏")):x("",!0),0==e.row.is_delete?(b(),j("span",R,"显示")):x("",!0)])),_:1}),C(Y,{prop:"supplier.name",label:"商户",width:"70"}),C(Y,{prop:"anchor_name",label:"主播名"},{default:v((e=>[w("div",q,[w("span",I,M(e.row.user.nickName),1)])])),_:1}),C(Y,{label:"数据统计"},{default:v((e=>[w("div",null,"观看人数："+M(e.row.view_num),1),w("div",null,"礼物收入："+M(e.row.gift_num),1),w("div",null,"订单数量："+M(e.row.sales_num),1),w("div",null,"点赞数量："+M(e.row.digg_num),1)])),_:1}),C(Y,{prop:"sort",label:"排序",width:"70"}),C(Y,{prop:"create_time",label:"添加时间"}),C(Y,{fixed:"right",label:"操作",width:"120"},{default:v((e=>[0==e.row.live_status?(b(),z(W,{key:0,onClick:t=>m.auditClick(e.row),type:"text",size:"small"},{default:v((()=>[k("审核")])),_:2},1032,["onClick"])):x("",!0),y((b(),z(W,{onClick:t=>m.editClick(e.row),type:"text",size:"small"},{default:v((()=>[k("修改")])),_:2},1032,["onClick"])),[[Q,"/plus/live/room/edit"]]),y((b(),z(W,{onClick:t=>m.showGift(e.row),type:"text",size:"small"},{default:v((()=>[k("礼物排行")])),_:2},1032,["onClick"])),[[Q,"/plus/live/room/user_gift"]])])),_:1})])),_:1},8,["data"])),[[Z,c.loading]])]),w("div",U,[C(B,{onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange,background:"","current-page":c.curPage,"page-size":c.pageSize,layout:"total, prev, pager, next, jumper",total:c.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),c.open_audit?(b(),z(H,{key:0,form:c.curModel,onClose:t[1]||(t[1]=e=>m.closeAudit(e,"audit"))},null,8,["form"])):x("",!0),C(J,{is_open:c.open_product,curModel:c.curModel,onClose:m.closeProducts},null,8,["is_open","curModel","onClose"]),C(K,{open:c.open_edit,form:c.curModel,onClose:m.closeEdit},null,8,["open","form","onClose"]),C(O,{is_open:c.open_gift,curModel:c.curModel,onClose:m.closeGift},null,8,["is_open","curModel","onClose"])])}],["__scopeId","data-v-cd8f08c2"]]);export{W as default};
