import{E as e,d as l,e as s,f as t,i as a,s as o,c as i}from"./element-plus-fe2e4fed.js";import{_ as r}from"./Setlink-9ee89cb7.js";import{_ as m}from"./Upload-f5c061cf.js";import{A as d}from"./ad-03e6559e.js";import{_ as n}from"./index-68daabb5.js";import{o as p,c as u,P as c,S as f,a as g,W as h,Y as _,T as j,X as y}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./data-8d58e140.js";import"./AddCategory-d39c217d.js";import"./file-498fee0c.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const k={components:{Upload:m,Setlink:r},data:()=>({isupload:!1,is_linkset:!1,isImg:!1,path:"",tips_Id:"",form:{title:"",category_id:"",image_id:"",sort:1,status:1,link_url:"",name:"",background:""},catgory:[],loading:!1,rules:{title:[{required:!0,message:"请输入广告标题",trigger:"blur"}],image_id:[{required:!0,message:"请上传图片",trigger:"blur"}]}}),created(){this.getCategoryList()},methods:{changeLink(){this.is_linkset=!0},closeLinkset(e){this.is_linkset=!1,null!=e&&(this.form.link_url=e.url,this.form.name="链接到 "+e.type+" "+e.name,this.tips_Id="链接到 "+e.type+" "+e.name)},openUpload(){this.isupload=!0},returnImgsFunc(e){null!=e&&(this.form.image_id=e[0].file_id,this.path=e[0].file_path,this.isImg=!0),this.isupload=!1},getCategoryList(){let e=this;d.toaddAd({},!0).then((l=>{e.catgory=l.data.catgory,e.catgory.length>0&&(e.form.category_id=e.catgory[0].category_id)})).catch((e=>{}))},onSubmit(){let l=this,s=l.form;l.$refs.form.validate((t=>{t&&(l.loading=!0,d.addAd(s,!0).then((s=>{l.loading=!1,e({message:s.msg,type:"success"}),l.$router.push("/plus/ad/ad/index")})).catch((e=>{l.loading=!1})))}))},cancelFunc(){this.$router.push({path:"/plus/ad/index"})}}},b={class:"product-add pb50"},x=g("div",{class:"common-form"},"添加广告",-1),v=["src","isImg"],V=g("div",{style:{color:"red"}},null,-1),C={class:"url-box flex-1"},I={class:"tips",id:"tips",style:{color:"#000"}},w=g("div",{class:"url-box ml10",style:{float:"right"}},null,-1),U={class:"common-button-wrapper"};const L=n(k,[["render",function(e,d,n,k,L,z){const S=l,A=s,F=t,q=m,$=a,D=o,R=r,E=i;return p(),u("div",b,[c(E,{size:"small",model:L.form,ref:"form",rules:L.rules,"label-width":"100px"},{default:f((()=>[x,c(A,{label:"广告标题",prop:"title"},{default:f((()=>[c(S,{modelValue:L.form.title,"onUpdate:modelValue":d[0]||(d[0]=e=>L.form.title=e),placeholder:"请输入广告标题",class:"max-w460"},null,8,["modelValue"])])),_:1}),c(A,{label:"广告图",prop:"image_id"},{default:f((()=>[g("div",null,[c(F,{type:"primary",onClick:z.openUpload},{default:f((()=>[h("上传图片")])),_:1},8,["onClick"]),L.isImg?(p(),u("img",{key:0,src:L.path,class:"mt10",width:120,isImg:L.isImg},null,8,v)):_("",!0),V,L.isupload?(p(),j(q,{key:1,isupload:L.isupload,onReturnImgs:z.returnImgsFunc},{default:f((()=>[h("上传图片")])),_:1},8,["isupload","onReturnImgs"])):_("",!0)])])),_:1}),c(A,{label:"广告状态"},{default:f((()=>[c(D,{modelValue:L.form.status,"onUpdate:modelValue":d[1]||(d[1]=e=>L.form.status=e)},{default:f((()=>[c($,{label:1},{default:f((()=>[h("显示")])),_:1}),c($,{label:0},{default:f((()=>[h("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1}),c(A,{label:"排序"},{default:f((()=>[c(S,{type:"number",modelValue:L.form.sort,"onUpdate:modelValue":d[2]||(d[2]=e=>L.form.sort=e),placeholder:"请输入数字",class:"max-w460"},null,8,["modelValue"])])),_:1}),c(A,{label:"链接",prop:"link_url"},{default:f((()=>[g("div",C,[c(S,{modelValue:L.form.link_url,"onUpdate:modelValue":d[3]||(d[3]=e=>L.form.link_url=e),type:"text",class:"max-w460",style:{width:"380px"}},null,8,["modelValue"]),c(F,{type:"primary",onClick:d[4]||(d[4]=e=>z.changeLink())},{default:f((()=>[h("选择链接")])),_:1}),g("div",I,y(L.tips_Id),1),c(S,{modelValue:L.form.name,"onUpdate:modelValue":d[5]||(d[5]=e=>L.form.name=e),type:"hidden",class:"max-w460",style:{width:"380px"}},null,8,["modelValue"])]),w])),_:1}),L.is_linkset?(p(),j(R,{key:0,is_linkset:L.is_linkset,onCloseDialog:z.closeLinkset},{default:f((()=>[h("选择链接")])),_:1},8,["is_linkset","onCloseDialog"])):_("",!0),g("div",U,[c(F,{size:"small",type:"info",onClick:z.cancelFunc},{default:f((()=>[h("取消")])),_:1},8,["onClick"]),c(F,{size:"small",type:"primary",onClick:z.onSubmit,loading:L.loading},{default:f((()=>[h("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model","rules"])])}]]);export{L as default};
