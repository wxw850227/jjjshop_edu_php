import{E as l,d as e,e as s,f as a,i as t,s as i,c as o,v as r}from"./element-plus-fe2e4fed.js";import{_ as m}from"./Setlink-9ee89cb7.js";import{_ as d}from"./Upload-f5c061cf.js";import{P as n}from"./page-47285e4e.js";import{_ as u}from"./index-68daabb5.js";import{ap as p,$ as c,o as f,c as _,P as g,S as h,a as j,W as k,T as b,Y as y,X as v}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./data-8d58e140.js";import"./AddCategory-d39c217d.js";import"./file-498fee0c.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const x={components:{Upload:d,Setlink:m},data:()=>({loading:!0,isupload:!1,is_linkset:!1,tips_Id:"",form:{ad_id:"",title:"",category_id:"",image_url:"",image:{},sort:1,status:"0"},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],link_url:[{required:!0,message:"请选择链接地址",trigger:"blur"}]}}),created(){this.getDetail()},methods:{changeLink(){this.is_linkset=!0},closeLinkset(l){this.is_linkset=!1,null!=l&&(l.url.startsWith("/")?this.form.link_url=l.url:this.form.link_url="/"+l.url,this.form.name="链接到 "+l.type+" "+l.name,this.tips_Id="链接到 "+l.type+" "+l.name)},openUpload(){this.isupload=!0},returnImgsFunc(l){null!=l&&(this.form.image_url=l[0].file_path),this.isupload=!1},getDetail(){let l=this;const e=l.$route.query.menu_id;n.menuDetail({menu_id:e},!0).then((e=>{l.form=e.data.detail,l.tips_Id=e.data.detail.name,l.form.image||(l.form.image={}),l.loading=!1})).catch((l=>{}))},onSubmit(){let e=this,s=this.form;e.$refs.form.validate((a=>{a&&n.editMenu(s,!0).then((s=>{l({message:s.msg,type:"success"}),e.$router.push("/page/page/mymenu/index")})).catch((l=>{}))}))},cancelFunc(){this.$router.push({path:"/page/page/mymenu/index"})}}},V={class:"product-add pb50"},w=j("div",{class:"common-form"},"编辑菜单",-1),C={class:"mt10",width:120,alt:""},U=j("div",{style:{color:"red"}},"图标大小为:25*25",-1),I={class:"url-box flex-1"},z=j("span",null,null,-1),D=j("span",null,null,-1),S={class:"tips",id:"tips",style:{color:"#000"}},$=j("div",{class:"url-box ml10",style:{float:"right"}},null,-1),q={class:"common-button-wrapper"};const F=u(x,[["render",function(l,n,u,x,F,L){const P=e,R=s,W=a,A=d,E=t,M=i,T=m,X=o,Y=p("img-url"),B=r;return c((f(),_("div",V,[g(X,{size:"small",model:F.form,ref:"form",rules:F.rules,"label-width":"100px"},{default:h((()=>[w,g(R,{label:"菜单名称",prop:"title"},{default:h((()=>[g(P,{modelValue:F.form.title,"onUpdate:modelValue":n[0]||(n[0]=l=>F.form.title=l),placeholder:"请输入广告标题",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"图标"},{default:h((()=>[j("div",null,[g(W,{type:"primary",onClick:L.openUpload},{default:h((()=>[k("上传图片")])),_:1},8,["onClick"]),c(j("img",C,null,512),[[Y,F.form.image_url]]),U,F.isupload?(f(),b(A,{key:0,isupload:F.isupload,onReturnImgs:L.returnImgsFunc},{default:h((()=>[k("上传图片")])),_:1},8,["isupload","onReturnImgs"])):y("",!0)])])),_:1}),g(R,{label:"状态"},{default:h((()=>[g(M,{modelValue:F.form.status,"onUpdate:modelValue":n[1]||(n[1]=l=>F.form.status=l)},{default:h((()=>[g(E,{label:1},{default:h((()=>[k("显示")])),_:1}),g(E,{label:0},{default:h((()=>[k("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1}),g(R,{label:"排序"},{default:h((()=>[g(P,{type:"number",modelValue:F.form.sort,"onUpdate:modelValue":n[2]||(n[2]=l=>F.form.sort=l),placeholder:"请输入数字",class:"max-w460"},null,8,["modelValue"])])),_:1}),g(R,{label:"链接",prop:"link_url"},{default:h((()=>[j("div",I,[g(P,{disabled:0==F.form.app_id,modelValue:F.form.link_url,"onUpdate:modelValue":n[3]||(n[3]=l=>F.form.link_url=l),type:"text",class:"max-w460",style:{width:"380px"}},null,8,["disabled","modelValue"]),z,g(W,{disabled:0==F.form.app_id,type:"primary",onClick:n[4]||(n[4]=l=>L.changeLink())},{default:h((()=>[k("选择链接"),D])),_:1},8,["disabled"]),j("div",S,v(F.tips_Id),1),g(P,{modelValue:F.form.name,"onUpdate:modelValue":n[5]||(n[5]=l=>F.form.name=l),type:"hidden",class:"max-w460"},null,8,["modelValue"])]),$])),_:1}),F.is_linkset?(f(),b(T,{key:0,is_linkset:F.is_linkset,onCloseDialog:L.closeLinkset},{default:h((()=>[k("选择链接")])),_:1},8,["is_linkset","onCloseDialog"])):y("",!0),j("div",q,[g(W,{size:"small",type:"info",onClick:L.cancelFunc,loading:F.loading},{default:h((()=>[k("取消")])),_:1},8,["onClick","loading"]),g(W,{size:"small",type:"primary",onClick:L.onSubmit,loading:F.loading},{default:h((()=>[k("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model","rules"])])),[[B,F.loading]])}]]);export{F as default};
