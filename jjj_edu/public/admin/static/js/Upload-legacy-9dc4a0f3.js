System.register(["./AddCategory-legacy-9b7b4bb1.js","./element-plus-legacy-30dfbc6a.js","./file-legacy-4a2ffd74.js","./@vue-legacy-59f40785.js","./index-legacy-325b1913.js"],(function(e,t){"use strict";var i,o,n,l,a,r,c,s,p,g,f,d,u,h,m,y,_,b,x,v,C,w,k,F,z,S,D;return{setters:[function(e){i=e._},function(e){o=e.a,n=e.E,l=e.B,a=e.f,r=e.C,c=e.D,s=e.y,p=e.n,g=e.o},function(e){f=e.F},function(e){d=e.ae,u=e.o,h=e.c,m=e.P,y=e.S,_=e.a,b=e.W,x=e.Q,v=e.a9,C=e.X,w=e.M,k=e.a1,F=e.Y,z=e.V,S=e.T},function(e){D=e._}],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";:root{--el-color-primary:#409eff !important;--el-component-size-small: 32px !important}.common-seach-wrap .el-input__wrapper{padding:0 15px}.common-seach-wrap .el-form-item__label{--el-text-color-regular: #606266;font-weight:400}.common-seach-wrap .el-form--inline .el-form-item{margin-right:10px}.el-form-item--small .el-form-item__label{height:var(--el-component-size-small)!important;line-height:var(--el-component-size-small)!important}.el-form-item__content{display:block;line-height:32px!important;margin-top:1px}.el-form-item__content .gray9{width:100%}.el-form-item__content .el-row .img{width:100%;margin-top:10px}.el-form-item__content .el-date-editor{--el-date-editor-width: auto}.el-form-item__content span{margin:0 6px}.el-form-item__content label span{margin:0!important}.el-form-item__content .el-input span{margin:0}.el-form-item__content .el-color-picker--small{height:auto}.el-form-item__content .el-color-picker--small .el-color-picker__trigger{width:32px;height:32px}.el-form-item__content .el-color-picker--small .el-color-picker__trigger span{margin:0!important}.el-select.el-select--small{height:var(--el-component-size-small)}.el-select.el-select--small .select-trigger.el-tooltip__trigger.el-tooltip__trigger,.el-select.el-select--small .select-trigger.el-tooltip__trigger.el-tooltip__trigger .el-input.el-input--small{height:100%}.el-table .cell{line-height:32px!important;font-size:12px!important}.el-table .cell .el-button.el-button--small.el-button--text+.el-button.el-button--small.el-button--text{margin-left:-12px!important}.el-button--small{--el-button-size: var(--el-component-size-small)}.common-button-wrapper .el-button--small{padding:5px 22px!important}.el-dialog__body{overflow:hidden;padding:10px 20px!important}.el-dialog__body .dialog-footer{float:right}.el-dialog__headerbtn .el-icon svg{width:auto!important;height:auto!important}.table-wrap{padding:0 20px 20px}.el-tabs .el-tabs__item{font-size:12px;font-weight:700!important}.el-tabs .el-tabs__item span{font-weight:inherit}.el-table{--el-table-border-color: #EEEEEE !important;--el-table-header-bg-color:#EAEDF4 !important;--el-table-header-text-color:#101010 !important;width:100%!important}.el-table .el-table__cell{position:static!important}.el-form{--el-text-color-regular:#333;--el-font-size-base: 12px !important}.el-form-item{--font-size: 12px !important}.el-form-item .el-form-item{margin-bottom:18px}.el-form-item__label{font-weight:700}.el-radio__input.is-checked+.el-radio__label span{color:var(--el-text-color-regular)}.pagination{overflow:hidden}.pagination .el-pagination,.upload-dialog .pagination-wrap{float:right}.img-select .el-icon svg{width:2em;height:2em}.el-image-viewer__canvas{padding:20px;box-sizing:border-box}.draggable-list{display:flex;justify-content:flex-start;flex-wrap:wrap}.draggable-list .wrapper{display:flex}.draggable-list .wrapper>span{display:flex;justify-content:flex-start;flex-wrap:wrap}.draggable-list .item{position:relative;width:110px;height:110px;margin-top:10px;margin-right:10px;border-radius:8px;overflow:hidden;border:1px solid #dddddd}.draggable-list .delete-btn{position:absolute;top:0;right:0;width:16px;height:16px;background:red;line-height:16px;font-size:16px;color:#fff;display:none}.draggable-list .item:hover .delete-btn{display:block}.draggable-list .item img{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);max-height:100%;max-width:100%}.draggable-list .img-select{display:flex;justify-content:center;align-items:center;border:1px dashed #dddddd;font-size:30px}.draggable-list .img-select i{color:#409eff}.edit_container{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;line-height:20px;color:#2c3e50;height:auto!important}.ql-editor{height:400px}.mb20{margin-bottom:20px}.upload-dialog .el-dialog__body{padding-top:0;padding-bottom:0}.upload-wrap-inline .leval-item{display:inline-block}.upload-wrap-inline .upload-btn{float:right}.fileContainer{position:relative;padding-left:120px}.fileContainer .file-type{position:absolute;top:0;left:0;bottom:0;overflow-y:auto;width:120px}.fileContainer .file-type li{padding:10px 20px 10px 0;cursor:pointer;text-align:center;min-height:20px;position:relative}.fileContainer .file-type li.active{background:#b4b4b4;color:#fff}.fileContainer .file-type li .operation{display:none;position:absolute;top:0;right:0;bottom:0;width:20px}.fileContainer .file-type li:hover .operation{display:block}.fileContainer .file-content{height:300px;text-align:center;overflow:hidden;padding:10px;margin:0;overflow-y:auto;border:1px solid #c6c6c6}.fileContainer li.file{float:left;margin:10px 9px 0;position:relative;width:100px}.fileContainer li.file img{display:inline-block;width:100px;height:100px;cursor:pointer;background-size:contain;background-repeat:no-repeat;background-position:center;background-color:#fff}.fileContainer li.file p.desc{font-size:12px;height:15px;line-height:15px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word}.fileContainer li.file:hover .bottom-shade{display:block}.fileContainer .bottom-shade{position:absolute;bottom:16px;left:0;background:rgba(0,0,0,.7);height:26px;line-height:26px;width:100%;display:none;transform:all .2s ease-out 0s;color:#fff}.fileContainer .bottom-shade a{color:#fff}.fileContainer .selectedIcon{width:20px;height:20px;position:absolute;top:0;left:0;background:#ff9900;z-index:1;color:#fff;cursor:pointer}.upload-dialog .pagination-wrap{margin-top:16px;text-align:right}.move-type{max-height:200px;overflow-y:auto}.move-type li{padding:0 10px;height:30px;line-height:30px;cursor:pointer}.move-type li:hover{background:#c6e2ff}\n',document.head.appendChild(t);var L={class:"upload-wrap"},T={class:"upload-wrap-inline mb16 clearfix"},j={class:"leval-item"},E={class:"move-type"},I=["onClick"],B={class:"leval-item upload-btn"},U={class:"fileContainer"},P={class:"file-type"},V=["onClick"],A=["onClick"],q=["onClick"],N={class:"file-content"},W={class:"fileContainerUI clearfix"},$=["onClick"],H={key:0,class:"selectedIcon"},M=["scr"],O=["src"],Q={class:"desc"},X=["onClick"],Y={class:"pagination-wrap"},G={class:"dialog-footer"};e("_",D({components:{AddCategory:i},data:function(){return{dialogWidth:"910px",activeType:null,typeList:[],imageUrl:null,dialogVisible:!0,fileList:[],addLoading:!1,this_config:{total:1,file_type:"image"},record:0,loading:!0,tableData:[],pageSize:36,totalDataNumber:0,curPage:1,isShowCategory:!1,category:null,fileIds:[],accept:""}},props:["config"],created:function(){if("[object object]"===Object.prototype.toString.call(this.config).toLowerCase()){for(var e in this.config)this.config[e]&&(this.this_config[e]=this.config[e]);"image"==this.this_config.file_type?this.accept="image/jpeg,image/png,image/jpg":"video"==this.this_config.file_type?this.accept="video/mp4":"audio"==this.this_config.file_type?this.accept="audio/mp3":"pdf"==this.this_config.file_type&&(this.accept="pdf")}this.getFileCategory(),this.getData()},methods:{getFileCategory:function(){var e=this;f.fileCategory({type:e.this_config.file_type},!0).then((function(t){e.typeList=[{group_id:null,group_name:"全部"}].concat(t.data.group_list)})).catch((function(t){e.loading=!1}))},addCategory:function(){this.isShowCategory=!0},editCategoryFunc:function(e){this.isShowCategory=!0,this.category=e},closeCategoryFunc:function(e){null!=e&&this.getFileCategory(),this.category=null,this.isShowCategory=!1},deleteCategoryFunc:function(e){var t=this;o.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteCategory(e)})).catch((function(){n({type:"info",message:"已取消删除"})}))},deleteCategory:function(e){var t=this;f.deleteCategory({group_id:e}).then((function(e){n({message:"删除成功",type:"success"}),t.getFileCategory()})).catch((function(e){n.error("删除失败")}))},selectTypeFunc:function(e){this.activeType=e,this.curPage=1,this.getData()},handleCurrentChange:function(e){this.curPage=e,this.getData()},handleSizeChange:function(e){this.curPage=1,this.pageSize=e,this.getData()},getData:function(){var e=this,t={page:e.curPage,pageSize:e.pageSize,group_id:e.activeType,type:e.this_config.file_type};f.fileList(t,!0).then((function(t){e.loading=!1,e.fileList=t.data.file_list,e.totalDataNumber=e.fileList.total})).catch((function(t){e.loading=!1}))},moveTypeFunc:function(e){var t=this,i=[];t.fileList.data.forEach((function(e){e.selected&&i.push(e.file_id)})),0!=i.length?o.confirm("确定移动选中的文件吗?是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){f.moveFile({group_id:e,fileIds:i},!0).then((function(e){n({message:"移动成功",type:"success"}),t.getFileCategory(),t.getData()})).catch((function(e){}))})).catch((function(){})):n({message:"请选择文件",type:"warning"})},fileChange:function(e){},onBeforeUploadImage:function(e){return!0},UploadImage:function(e){var t=this,i=l.service({lock:!0,text:"文件上传中,请等待",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o=new FormData;o.append("iFile",e.file),o.append("group_id",t.activeType),o.append("file_type",t.this_config.file_type),f.uploadFile(o).then((function(o){i.close(),t.getData(),e.onSuccess()})).catch((function(t){i.close(),n({message:"本次上传文件失败",type:"warning"}),e.onError()}))},selectFileFunc:function(e,t){e.selected?(e.selected=!1,this.record--):(e.selected=!0,this.record++),this.fileList.data[t]=e},deleteFileFunc:function(e){var t=this;o.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=l.service({lock:!0,text:"正在删除",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),o=[];if(e)o.push(e.file_id);else for(var a=0;a<t.fileList.data.length;a++){var r=t.fileList.data[a];r.selected&&o.push(r.file_id)}f.deleteFiles({fileIds:o},!0).then((function(e){i.close(),n({message:"删除成功",type:"success"}),t.getData()})).catch((function(e){i.close()}))})).catch((function(){loading.close(),n({message:"删除失败",type:"warning"})}))},confirmFunc:function(){for(var e=[],t=0,i=0;i<this.fileList.data.length;i++){var o=this.fileList.data[i];if(o.selected){var n={file_id:o.file_id,file_path:o.file_path,real_name:o.real_name};e.push(n),t++}if(t>this.this_config.total)break}this.$emit("returnImgs",e)},cancelFunc:function(){this.$emit("returnImgs",null)}}},[["render",function(e,t,o,n,l,f){var D=a,J=r,K=c,R=d("Edit"),Z=s,ee=d("Delete"),te=d("Check"),ie=p,oe=g,ne=i;return u(),h("div",L,[m(oe,{title:"文件管理",modelValue:l.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.dialogVisible=e}),"close-on-click-modal":!1,"custom-class":"upload-dialog","close-on-press-escape":!1,onClose:f.cancelFunc,width:l.dialogWidth,"append-to-body":!0},{footer:y((function(){return[_("div",G,[m(D,{size:"small",onClick:f.cancelFunc},{default:y((function(){return[b("取 消")]})),_:1},8,["onClick"]),m(D,{size:"small",type:"primary",onClick:f.confirmFunc},{default:y((function(){return[b("确 定")]})),_:1},8,["onClick"])])]})),default:y((function(){return[_("div",T,[_("div",j,[m(D,{size:"small",icon:"Plus",onClick:f.addCategory},{default:y((function(){return[b("添加分类")]})),_:1},8,["onClick"]),m(J,{placement:"bottom",width:"200",trigger:"click",value:!0},{reference:y((function(){return[m(D,{size:"small",icon:"CaretBottom"},{default:y((function(){return[b("移动至")]})),_:1})]})),default:y((function(){return[_("ul",E,[(u(!0),h(x,null,v(l.typeList,(function(e,t){return u(),h("li",{key:t,onClick:function(t){return f.moveTypeFunc(e.group_id)}},C(e.group_name),9,I)})),128))])]})),_:1}),m(D,{size:"small",type:"danger",icon:"Delete",onClick:t[0]||(t[0]=function(e){return f.deleteFileFunc(!1)})},{default:y((function(){return[b("批量删除")]})),_:1})]),_("div",B,[m(K,{class:"avatar-uploader",multiple:"",ref:"upload",action:"string",accept:l.accept,"before-upload":f.onBeforeUploadImage,"http-request":f.UploadImage,"show-file-list":!1,"on-change":f.fileChange},{default:y((function(){return[m(D,{size:"small",icon:"Upload",type:"primary"},{default:y((function(){return[b("点击上传")]})),_:1})]})),_:1},8,["accept","before-upload","http-request","on-change"])])]),_("div",U,[_("div",P,[_("ul",null,[(u(!0),h(x,null,v(l.typeList,(function(e,i){return u(),h("li",{class:w(l.activeType==e.group_id?"item active":"item"),key:i,onClick:function(t){return f.selectTypeFunc(e.group_id)}},[b(C(e.group_name)+" ",1),null!=e.group_id?(u(),h("div",{key:0,class:"operation",onClick:t[1]||(t[1]=k((function(){}),["stop"]))},[_("p",{onClick:function(t){return f.editCategoryFunc(e)}},[m(Z,null,{default:y((function(){return[m(R)]})),_:1})],8,A),_("p",{onClick:function(t){return f.deleteCategoryFunc(e.group_id)}},[m(Z,null,{default:y((function(){return[m(ee)]})),_:1})],8,q)])):F("",!0)],10,V)})),128))])]),_("div",N,[_("ul",W,[(u(!0),h(x,null,v(l.fileList.data,(function(e,i){return u(),h("li",{class:"file",key:i,onClick:function(t){return f.selectFileFunc(e,i)}},[1==e.selected?(u(),h("div",H,[m(Z,null,{default:y((function(){return[m(te)]})),_:1})])):F("",!0),"image"==l.this_config.file_type?(u(),h("img",{key:1,scr:e.file_path,style:z("background-image:url("+e.file_path+")"),alt:""},null,12,M)):F("",!0),"video"==l.this_config.file_type?(u(),h("video",{key:2,height:"100",width:"100",src:e.file_path,autoplay:!1}," 您的浏览器不支持 video 标签 ",8,O)):F("",!0),_("p",Q,C(e.real_name),1),_("div",{class:"bottom-shade",onClick:t[2]||(t[2]=k((function(){}),["stop"]))},[_("a",{href:"javascript:void(0)",onClick:function(t){return f.deleteFileFunc(e)}},[m(Z,null,{default:y((function(){return[m(ee)]})),_:1})],8,X)])],8,$)})),128))])])]),_("div",Y,[m(ie,{onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange,"current-page":l.curPage,"page-sizes":[12,24,36,42,48],"page-size":l.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:l.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]})),_:1},8,["modelValue","onClose","width"]),l.isShowCategory?(u(),S(ne,{key:0,category:l.category,file_type:l.this_config.file_type,onCloseCategory:f.closeCategoryFunc},null,8,["category","file_type","onCloseCategory"])):F("",!0)])}]]))}}}));
