import{_ as e}from"./Upload-ecf46188.js";import{d as i,e as l,y as o,f as a,h as d,g as s,i as m,s as t}from"./element-plus-fe2e4fed.js";import{d as r}from"./vuedraggable-cabcff94.js";import{_ as u}from"./index-49a7d7a3.js";import{ae as n,o as f,c as p,P as c,S as _,a as g,Y as h,W as v,X as j,T as k}from"./@vue-0361ad4a.js";import"./AddCategory-1e090b14.js";import"./file-437a81f7.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-3c8001f5.js";import"./sortablejs-c079517e.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const b={components:{Upload:e,draggable:r},data:()=>({isProductUpload:!1,config:{},file_name:"image",inputVisible:!1,inputValue:""}),inject:["form"],created(){},methods:{openProductUpload:function(e,i){this.file_name=i,"image"==e?this.config={total:9,file_type:"image"}:"video"==e?this.config={total:1,file_type:"video"}:"audio"==e&&(this.config={total:1,file_type:"audio"}),this.isProductUpload=!0},handleClose(e){this.form.model.label.splice(this.form.model.label.indexOf(e),1)},showInput(){this.inputVisible=!0,this.$nextTick((e=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(){let e=this.inputValue;e&&(""==this.form.model.label&&(this.form.model.label=[]),this.form.model.label.push(e)),this.inputVisible=!1,this.inputValue=""},returnProductImgsFunc(e){if(null!=e)if("video_link"==this.file_name)this.form.model.video_link=e[0].file_path;else if("banner"==this.file_name){let i=this.form.model.banner.concat(e);this.form.model.banner=i}else"image"==this.file_name?(this.form.model.image_id=e[0].file_id,this.form.model.image=e[0]):"video_image"==this.file_name?this.form.model.video_image=e[0].file_path:"audio_link"==this.file_name?this.form.model.audio_link=e[0].file_path:"audio_image"==this.file_name&&(this.form.model.audio_image=e[0].file_path);this.isProductUpload=!1},deleteImg(e){this.form.model.image.splice(e,1)},delVideo(){this.form.model.video_link="",this.form.model.video_image=""},delAudio(){this.form.model.audio_link=""},setExpress(){this.$router.push("/setting/delivery/index")},changeDelivery(e){0==e&&(this.form.model.delivery_id="")}}},y=g("div",{class:"common-form"},"基本信息",-1),V={class:"mb16"},U={key:1},P=["src"],C={class:"draggable-list"},w=["src"],x=g("div",{class:"tips red"},"尺寸：4:3",-1),I={class:"mb16"},q={key:1},A=["src"],$={class:"draggable-list"},T=["src"],z=g("div",{class:"tips red"},"尺寸：4:3",-1),F=g("div",{class:"common-form"},"其他设置",-1);const R=u(b,[["render",function(r,u,b,R,D,E){const O=i,S=l,W=n("Plus"),X=o,Y=a,B=d,G=s,H=m,J=t,K=e;return f(),p("div",null,[y,c(S,{label:"章节名称：",rules:[{required:!0,message:"请填写章节名称"}],prop:"model.title"},{default:_((()=>[c(O,{modelValue:E.form.model.title,"onUpdate:modelValue":u[0]||(u[0]=e=>E.form.model.title=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),c(S,{label:"章节视频："},{default:_((()=>[c(G,null,{default:_((()=>[g("div",V,[c(O,{modelValue:E.form.model.video_link,"onUpdate:modelValue":u[1]||(u[1]=e=>E.form.model.video_link=e),class:"max-w460"},null,8,["modelValue"])]),c(B,{class:"draggable-list"},{default:_((()=>[""==E.form.model.video_link?(f(),p("div",{key:0,class:"item img-select",onClick:u[2]||(u[2]=e=>E.openProductUpload("video","video_link"))},[c(X,null,{default:_((()=>[c(W)])),_:1})])):h("",!0),""!=E.form.model.video_link?(f(),p("div",U,[g("video",{width:"150",height:"150",src:E.form.model.video_link,autoplay:!1,controls:""},"您的浏览器不支持 video 标签",8,P),g("div",null,[c(Y,{icon:"Picture",onClick:E.delVideo},{default:_((()=>[v("删除视频")])),_:1},8,["onClick"])])])):h("",!0)])),_:1})])),_:1})])),_:1}),c(S,{label:"视频封面："},{default:_((()=>[g("div",null,j(E.form.model.video_image),1),c(G,null,{default:_((()=>[g("div",C,[""==E.form.model.video_image?(f(),p("div",{key:0,class:"item img-select",onClick:u[3]||(u[3]=e=>E.openProductUpload("image","video_image"))},[c(X,null,{default:_((()=>[c(W)])),_:1})])):h("",!0),""!=E.form.model.video_image?(f(),p("div",{key:1,class:"item",onClick:u[4]||(u[4]=e=>E.openProductUpload("image","video_image"))},[g("img",{src:E.form.model.video_image,width:"100",height:"100"},null,8,w)])):h("",!0)]),x])),_:1})])),_:1}),c(S,{label:"章节音频："},{default:_((()=>[c(G,null,{default:_((()=>[g("div",I,[c(O,{modelValue:E.form.model.audio_link,"onUpdate:modelValue":u[5]||(u[5]=e=>E.form.model.audio_link=e),class:"max-w460"},null,8,["modelValue"])]),c(B,{class:"draggable-list"},{default:_((()=>[""==E.form.model.audio_link?(f(),p("div",{key:0,class:"item img-select",onClick:u[6]||(u[6]=e=>E.openProductUpload("audio","audio_link"))},[c(X,null,{default:_((()=>[c(W)])),_:1})])):h("",!0),""!=E.form.model.audio_link?(f(),p("div",q,[g("audio",{width:"150",height:"150",src:E.form.model.audio_link,autoplay:!1,controls:""},"您的浏览器不支持 audio 标签",8,A),g("div",null,[c(Y,{icon:"Picture",onClick:E.delAudio},{default:_((()=>[v("删除音频")])),_:1},8,["onClick"])])])):h("",!0)])),_:1})])),_:1})])),_:1}),c(S,{label:"音频封面："},{default:_((()=>[g("div",null,j(E.form.model.audio_image),1),c(G,null,{default:_((()=>[g("div",$,[""==E.form.model.audio_image?(f(),p("div",{key:0,class:"item img-select",onClick:u[7]||(u[7]=e=>E.openProductUpload("image","audio_image"))},[c(X,null,{default:_((()=>[c(W)])),_:1})])):h("",!0),""!=E.form.model.audio_image?(f(),p("div",{key:1,class:"item",onClick:u[8]||(u[8]=e=>E.openProductUpload("image","audio_image"))},[g("img",{src:E.form.model.audio_image,width:"100",height:"100"},null,8,T)])):h("",!0)]),z])),_:1})])),_:1}),F,c(S,{label:"章节排序：",rules:[{required:!0,message:" "}],prop:"model.sort"},{default:_((()=>[c(O,{type:"number",min:"0",modelValue:E.form.model.sort,"onUpdate:modelValue":u[9]||(u[9]=e=>E.form.model.sort=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),c(S,{label:"是否试看：",rules:[{required:!0,message:" "}],prop:"model.is_see"},{default:_((()=>[c(J,{modelValue:E.form.model.is_see,"onUpdate:modelValue":u[10]||(u[10]=e=>E.form.model.is_see=e)},{default:_((()=>[c(H,{label:1},{default:_((()=>[v("是")])),_:1}),c(H,{label:0},{default:_((()=>[v("否")])),_:1})])),_:1},8,["modelValue"])])),_:1}),D.isProductUpload?(f(),k(K,{key:0,config:D.config,isupload:D.isProductUpload,onReturnImgs:E.returnProductImgsFunc},{default:_((()=>[v("上传图片")])),_:1},8,["config","isupload","onReturnImgs"])):h("",!0)])}]]);export{R as default};
