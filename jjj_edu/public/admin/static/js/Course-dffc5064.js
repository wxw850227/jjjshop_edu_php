import{i as e,s as a,e as t,F as s,d as o,y as l,f as r,c as i}from"./element-plus-fe2e4fed.js";import{D as c}from"./data-97822b17.js";import{d}from"./vuedraggable-cabcff94.js";import{ae as u,ap as m,o as n,c as p,a as h,X as g,P as y,S as j,W as f,Q as b,T as _,Y as C,$ as I,a1 as k}from"./@vue-0361ad4a.js";import{_ as v}from"./index-2e57a1f5.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-3c8001f5.js";import"./sortablejs-c079517e.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const V={class:"common-form"},x={class:"d-s-c f-w"},w={class:"item"},L={class:"delete-box"},U={alt:""};const A=v({components:{draggable:d},data:()=>({loading:!0,CategoryList:[],currCategory:[]}),props:["curItem","selectedIndex","opts"],created(){this.getData()},watch:{selectedIndex:function(e,a){this.currCategory=this.currCategoryAuto(this.CategoryList)}},methods:{changeLink(e){this.is_linkset=!0,this.index=e},closeLinkset(e){this.is_linkset=!1,e&&(this.curItem.data[this.index].linkUrl=e.url,this.curItem.data[this.index].name="链接到 "+e.type+" "+e.name)},getData(){let e=this;c.cateList({page_id:e.page_id},!0).then((a=>{e.CategoryList=a.data.list,e.currCategory=e.currCategoryAuto(a.data.list),e.loading=!1})).catch((a=>{e.loading=!1}))},currCategoryAuto(e){let a=[];for(let t=0;t<e.length;t++){let s=e[t];if(s.category_id==this.curItem.params.auto.category){a.push(s.category_id);break}if("[object Array]"==Object.prototype.toString.call(s.child)&&s.child.length>0)for(let e=0;e<s.child.length;e++)if(s.child[e].category_id==this.curItem.params.auto.category){a.push(s.category_id),a.push(s.child[e].category_id);break}}return a},check(e,a){let t=e?1:0;this.curItem.style.show[a]=t},changeCategory(e){if(e.length>0){let e=this.$refs.cascader.getCheckedNodes();this.curItem.params.auto.category=e[0].data.category_id}else this.curItem.params.auto.category=0}}},[["render",function(c,d,v,A,D,S){const $=e,z=a,N=t,F=s,P=o,q=u("CircleCloseFilled"),E=l,O=u("draggable"),Q=r,T=i,W=m("img-url");return n(),p("div",null,[h("div",V,[h("span",null,g(v.curItem.name),1)]),y(T,{size:"small",model:v.curItem,"label-width":"100px"},{default:j((()=>[y(N,{label:"课程来源："},{default:j((()=>[y(z,{modelValue:v.curItem.params.source,"onUpdate:modelValue":d[0]||(d[0]=e=>v.curItem.params.source=e)},{default:j((()=>[y($,{label:"auto"},{default:j((()=>[f("自动获取")])),_:1}),y($,{label:"choice"},{default:j((()=>[f("手动选择")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"auto"==v.curItem.params.source?(n(),p(b,{key:0},[y(N,{label:"课程分类："},{default:j((()=>[D.CategoryList.length>0?(n(),_(F,{key:0,class:"ww100",modelValue:D.currCategory,"onUpdate:modelValue":d[1]||(d[1]=e=>D.currCategory=e),ref:"cascader",options:D.CategoryList,props:{checkStrictly:!0,children:"child",value:"category_id",label:"name"},onChange:S.changeCategory,clearable:""},null,8,["modelValue","options","onChange"])):C("",!0)])),_:1}),y(N,{label:"课程排序："},{default:j((()=>[y(z,{modelValue:v.curItem.params.auto.productSort,"onUpdate:modelValue":d[2]||(d[2]=e=>v.curItem.params.auto.productSort=e)},{default:j((()=>[y($,{label:"all"},{default:j((()=>[f("综合")])),_:1}),y($,{label:"sales"},{default:j((()=>[f("销量")])),_:1})])),_:1},8,["modelValue"])])),_:1}),y(N,{label:"显示数量："},{default:j((()=>[y(P,{modelValue:v.curItem.params.auto.showNum,"onUpdate:modelValue":d[3]||(d[3]=e=>v.curItem.params.auto.showNum=e),class:"w-auto"},null,8,["modelValue"])])),_:1})],64)):C("",!0),"choice"==v.curItem.params.source?(n(),_(N,{key:1,label:"课程列表："},{default:j((()=>[h("div",null,[y(O,{modelValue:v.curItem.data,"onUpdate:modelValue":d[4]||(d[4]=e=>v.curItem.data=e),options:{draggable:".item",animation:500},class:"choice-product-list"},{item:j((({element:e,index:a})=>[h("div",x,[h("div",w,[h("div",L,[y(E,{onClick:e=>c.$parent.onEditorDeleleData(a,v.selectedIndex)},{default:j((()=>[y(q)])),_:2},1032,["onClick"])]),I(h("img",U,null,512),[[W,e.image]])])])])),_:1},8,["modelValue","options"])]),h("div",null,[y(Q,{icon:"Plus",onClick:d[5]||(d[5]=k((e=>c.$parent.openCourse(v.curItem.data,!0)),["stop"]))},{default:j((()=>[f("选择课程")])),_:1})])])),_:1})):C("",!0)])),_:1},8,["model"])])}]]);export{A as default};
