import{_ as e}from"./Upload-ecf46188.js";import{d as l,e as o,q as a,r as i,x as d,f as s,y as m,g as t,i as r,s as u}from"./element-plus-fe2e4fed.js";import{d as n}from"./vuedraggable-cabcff94.js";import{ae as p,ap as c,o as f,c as _,P as g,S as h,Q as b,a9 as v,T as y,Y as V,W as j,X as k,ah as U,a as C,$ as w,a1 as P,bh as x,bf as I}from"./@vue-0361ad4a.js";import{_ as q}from"./index-49a7d7a3.js";import"./AddCategory-1e090b14.js";import"./file-437a81f7.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-3c8001f5.js";import"./sortablejs-c079517e.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const z={components:{Upload:e,draggable:n},data:()=>({isProductUpload:!1,config:{},file_name:"image",inputVisible:!1,inputValue:"",rules:{course_price:[{validator:(e,l,o)=>{""===l?o(new Error("请输入金额")):(l<=0&&o(new Error("价格不小于0.01")),o())},trigger:"blur"}]}}),inject:["form"],created(){},methods:{openProductUpload:function(e,l){this.file_name=l,"image"==e?this.config={total:9,file_type:"image"}:"video"==e&&(this.config={total:1,file_type:"video"}),this.isProductUpload=!0},handleClose(e){this.form.model.label.splice(this.form.model.label.indexOf(e),1)},showInput(){this.inputVisible=!0,this.$nextTick((e=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(){let e=this.inputValue;e&&(""==this.form.model.label&&(this.form.model.label=[]),this.form.model.label.push(e)),this.inputVisible=!1,this.inputValue=""},returnProductImgsFunc(e){null!=e&&("video_link"==this.file_name?this.form.model.video_link=e[0].file_path:"banner"==this.file_name?(this.form.model.banner=this.form.model&&this.form.model.banner||[],e&&e.length>0&&(this.form.model.banner=this.form.model.banner.concat(e))):"image"==this.file_name?(this.form.model.image_id=e[0].file_id,this.form.model.image=e[0]):"video_image"==this.file_name&&(this.form.model.video_image=e[0].file_path)),this.isProductUpload=!1},deleteImg(e){this.form.model.banner.splice(e,1)},delVideo(){this.form.model.video_link="",this.form.model.video_image=""}}},T=e=>(x("data-v-9a34d90e"),e=e(),I(),e),$=T((()=>C("div",{class:"common-form"},"基本信息",-1))),A={class:"draggable-list"},B=["src"],E=T((()=>C("div",{class:"tips red"},"尺寸：263*148",-1))),F={class:"draggable-list"},K={class:"item"},R=["onClick"],O=T((()=>C("div",{class:"tips red"},"尺寸：750*421",-1))),Q={class:"mb16"},S={class:"draggable-list"},W={key:1},X=["src"],Y={class:"draggable-list"},D=["src"],G=T((()=>C("div",{class:"tips red"},"尺寸：4:3",-1))),H=T((()=>C("div",{class:"common-form"},"其他设置",-1)));const J=q(z,[["render",function(n,x,I,q,z,T){const J=l,L=o,M=a,N=i,Z=d,ee=s,le=p("Plus"),oe=m,ae=t,ie=p("Close"),de=p("draggable"),se=r,me=u,te=e,re=c("img-url");return f(),_("div",null,[$,g(L,{label:"课程名称：",rules:[{required:!0,message:"请填写课程名称"}],prop:"model.title"},{default:h((()=>[g(J,{modelValue:T.form.model.title,"onUpdate:modelValue":x[0]||(x[0]=e=>T.form.model.title=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),g(L,{label:"所属分类：",rules:[{required:!0,message:"请选择课程分类"}],prop:"model.category_id"},{default:h((()=>[g(N,{modelValue:T.form.model.category_id,"onUpdate:modelValue":x[1]||(x[1]=e=>T.form.model.category_id=e)},{default:h((()=>[(f(!0),_(b,null,v(T.form.category,(e=>(f(),_(b,{key:e.category_id},[g(M,{value:e.category_id,label:e.name},null,8,["value","label"]),void 0!==e.child?(f(!0),_(b,{key:0},v(e.child,(e=>(f(),_(b,{key:e.category_id},[g(M,{value:e.category_id,label:e.name,style:{"padding-left":"30px"}},null,8,["value","label"]),void 0!==e.child?(f(!0),_(b,{key:0},v(e.child,(e=>(f(),y(M,{key:e.category_id,value:e.category_id,label:e.name,style:{"padding-left":"60px"}},null,8,["value","label"])))),128)):V("",!0)],64)))),128)):V("",!0)],64)))),128))])),_:1},8,["modelValue"])])),_:1}),g(L,{label:"讲师：",rules:[{required:!0,message:"请选择课程讲师"}],prop:"model.lecturer_id"},{default:h((()=>[g(N,{modelValue:T.form.model.lecturer_id,"onUpdate:modelValue":x[2]||(x[2]=e=>T.form.model.lecturer_id=e)},{default:h((()=>[g(M,{value:"",label:"请选择讲师"}),(f(!0),_(b,null,v(T.form.lecturer,(e=>(f(),y(M,{key:e.lecturer_id,value:e.lecturer_id,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(L,{label:"标签：",prop:"label"},{default:h((()=>[(f(!0),_(b,null,v(T.form.model.label,(e=>(f(),y(Z,{key:e,closable:"","disable-transitions":!1,onClose:l=>T.handleClose(e)},{default:h((()=>[j(k(e),1)])),_:2},1032,["onClose"])))),128)),z.inputVisible?(f(),y(J,{key:0,class:"input-new-tag",maxlength:"100",modelValue:z.inputValue,"onUpdate:modelValue":x[3]||(x[3]=e=>z.inputValue=e),ref:"saveTagInput",size:"small",onKeyup:U(T.handleInputConfirm,["enter","native"]),onBlur:T.handleInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):T.form.model.label.length<=5?(f(),y(ee,{key:1,class:"button-new-tag",size:"small",onClick:T.showInput},{default:h((()=>[j("+ 添加")])),_:1},8,["onClick"])):V("",!0)])),_:1}),g(L,{label:"课程封面：",rules:[{required:!0,message:"请上传课程封面"}],prop:"model.image_id"},{default:h((()=>[g(ae,null,{default:h((()=>[C("div",A,[0==T.form.model.image_id?(f(),_("div",{key:0,class:"item img-select",onClick:x[4]||(x[4]=e=>T.openProductUpload("image","image"))},[g(oe,null,{default:h((()=>[g(le)])),_:1})])):V("",!0),0!=T.form.model.image_id?(f(),_("div",{key:1,class:"item",onClick:x[5]||(x[5]=e=>T.openProductUpload("image","image"))},[C("img",{src:T.form.model.image.file_path,width:"100",height:"100"},null,8,B)])):V("",!0)]),E])),_:1})])),_:1}),g(L,{label:"课程图片：",rules:[{required:!0,message:"请上传课程图片"}],prop:"model.banner"},{default:h((()=>[C("div",F,[g(de,{class:"wrapper",modelValue:T.form.model.banner,"onUpdate:modelValue":x[6]||(x[6]=e=>T.form.model.banner=e)},{item:h((({element:e,index:l})=>[C("div",K,[w(C("img",null,null,512),[[re,e.file_path]]),C("a",{href:"javascript:void(0);",class:"delete-btn",onClick:P((e=>T.deleteImg(l)),["stop"])},[g(oe,null,{default:h((()=>[g(ie)])),_:1})],8,R)])])),_:1},8,["modelValue"]),C("div",{class:"item img-select",onClick:x[7]||(x[7]=e=>T.openProductUpload("image","banner"))},[g(oe,null,{default:h((()=>[g(le)])),_:1})])]),O])),_:1}),g(L,{label:"课程视频："},{default:h((()=>[C("div",Q,[g(J,{modelValue:T.form.model.video_link,"onUpdate:modelValue":x[8]||(x[8]=e=>T.form.model.video_link=e),class:"max-w460"},null,8,["modelValue"])]),C("div",S,[""==T.form.model.video_link?(f(),_("div",{key:0,class:"item img-select",onClick:x[9]||(x[9]=e=>T.openProductUpload("video","video_link"))},[g(oe,null,{default:h((()=>[g(le)])),_:1})])):V("",!0),""!=T.form.model.video_link?(f(),_("div",W,[C("video",{width:"150",height:"150",src:T.form.model.video_link,autoplay:!1,controls:""},"您的浏览器不支持 video 标签",8,X),C("div",null,[g(ee,{icon:"Picture",onClick:T.delVideo},{default:h((()=>[j("删除视频")])),_:1},8,["onClick"])])])):V("",!0)])])),_:1}),g(L,{label:"视频封面："},{default:h((()=>[g(ae,null,{default:h((()=>[C("div",Y,[""==T.form.model.video_image?(f(),_("div",{key:0,class:"item img-select",onClick:x[10]||(x[10]=e=>T.openProductUpload("image","video_image"))},[g(oe,null,{default:h((()=>[g(le)])),_:1})])):V("",!0),""!=T.form.model.video_image?(f(),_("div",{key:1,class:"item",onClick:x[11]||(x[11]=e=>T.openProductUpload("image","video_image"))},[C("img",{src:T.form.model.video_image,width:"100",height:"100"},null,8,D)])):V("",!0)]),G])),_:1})])),_:1}),H,g(L,{label:"课程排序：",rules:[{required:!0,message:" "}],prop:"model.sort"},{default:h((()=>[g(J,{type:"number",min:"0",modelValue:T.form.model.sort,"onUpdate:modelValue":x[12]||(x[12]=e=>T.form.model.sort=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),g(L,{label:"收费方式：",prop:"model.is_pay"},{default:h((()=>[g(me,{modelValue:T.form.model.is_pay,"onUpdate:modelValue":x[13]||(x[13]=e=>T.form.model.is_pay=e)},{default:h((()=>[g(se,{label:0},{default:h((()=>[j("免费")])),_:1}),g(se,{label:1},{default:h((()=>[j("付费")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==T.form.model.is_pay?(f(),y(L,{key:0,rules:z.rules.course_price,label:"价格：",prop:"model.course_price"},{default:h((()=>[g(J,{type:"number",min:"0.01",modelValue:T.form.model.course_price,"onUpdate:modelValue":x[14]||(x[14]=e=>T.form.model.course_price=e),class:"max-w460"},null,8,["modelValue"])])),_:1},8,["rules"])):V("",!0),g(L,{label:"状态：",prop:"model.is_show"},{default:h((()=>[g(me,{modelValue:T.form.model.is_show,"onUpdate:modelValue":x[15]||(x[15]=e=>T.form.model.is_show=e)},{default:h((()=>[g(se,{label:0},{default:h((()=>[j("显示")])),_:1}),g(se,{label:1},{default:h((()=>[j("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1}),z.isProductUpload?(f(),y(te,{key:1,config:z.config,isupload:z.isProductUpload,onReturnImgs:T.returnProductImgsFunc},{default:h((()=>[j(" 上传图片")])),_:1},8,["config","isupload","onReturnImgs"])):V("",!0)])}],["__scopeId","data-v-9a34d90e"]]);export{J as default};
