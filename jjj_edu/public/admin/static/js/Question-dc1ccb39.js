import{E as e,d as t,e as l,q as a,r as i,f as s,c as o,l as n,m as r,n as d,o as p,v as m}from"./element-plus-fe2e4fed.js";import{Q as u}from"./question-f32e2692.js";import{_ as c}from"./index-2e57a1f5.js";import{o as h,T as g,S as f,a as b,P as y,W as C,Y as _,$ as j,ae as k,c as q,X as w}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const v={class:"common-seach-wrap"},z={class:"product-content"},D={class:"table-wrap"},x={class:"pagination"},S={class:"dialog-footer"};const V={components:{Question:c({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},cateList:[],listData:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isquestion","islist","isDisabled","questionType","currentList"],watch:{isquestion:function(e,t){e!=t&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.$props.questionType?this.formInline.question_type=this.$props.questionType:this.formInline.question_type=0,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,u.questionList(t,!0).then((t=>{1==t.code&&(e.loading=!1,t.data.list.data.forEach((e=>{e.noChoose=!0})),e.listData=t.data.list.data,e.totalDataNumber=t.data.list.total,e.judegCheck())})).catch((e=>{}))},judegCheck(){this.$props.currentList&&this.$props.currentList.length>0&&this.$props.currentList.forEach((e=>{this.listData&&this.listData.length>0&&this.listData.forEach((t=>{e.question_id==t.question_id&&(t.noChoose=!1)}))}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let t=this,l=null;t.multipleSelection.length<1?e({message:"请至少选择一件产品课程！",type:"error"}):(t.islist&&void 0!==t.islist?(t.multipleSelection.forEach((e=>{e.image?e.image=e.image.file_path:e.image=""})),l=t.multipleSelection):(l=t.multipleSelection,l.image?l.image=l.image.file_path:l.image=""),t.params=l,t.type="success",t.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,u,c,k,q,w){const V=t,F=l,I=a,T=i,$=s,E=o,L=n,P=r,N=d,Q=p,U=m;return h(),g(Q,{title:"选择课程",modelValue:q.dialogVisible,"onUpdate:modelValue":u[3]||(u[3]=e=>q.dialogVisible=e),onClose:w.dialogFormVisible,"modal-append-to-body":!0,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:f((()=>[b("div",S,[y($,{size:"small",onClick:u[2]||(u[2]=e=>q.dialogVisible=!1)},{default:f((()=>[C("取 消")])),_:1}),c.islist?(h(),g($,{key:0,size:"small",type:"primary",onClick:w.addClerk},{default:f((()=>[C("确 定")])),_:1},8,["onClick"])):_("",!0)])])),default:f((()=>[b("div",v,[y(E,{inline:!0,size:"small",model:q.formInline,class:"demo-form-inline"},{default:f((()=>[y(F,{label:"课程名称"},{default:f((()=>[y(V,{placeholder:"请输入课程名称",modelValue:q.formInline.search,"onUpdate:modelValue":u[0]||(u[0]=e=>q.formInline.search=e)},null,8,["modelValue"])])),_:1}),y(F,{label:"课程状态"},{default:f((()=>[y(T,{modelValue:q.formInline.question_type,"onUpdate:modelValue":u[1]||(u[1]=e=>q.formInline.question_type=e),placeholder:"请选择课程状态",style:{width:"100px"}},{default:f((()=>[y(I,{label:"全部",value:0}),y(I,{label:"单选题",value:1}),y(I,{label:"多选题",value:2}),y(I,{label:"判断题",value:3})])),_:1},8,["modelValue"]),y($,{type:"primary",icon:"Search",onClick:w.getData,style:{"margin-left":"12px"}},{default:f((()=>[C("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),b("div",z,[b("div",D,[j((h(),g(P,{size:"small",data:q.listData,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:w.tableCurrentChange},{default:f((()=>[y(L,{prop:"type_name",width:"100",label:"题型"}),y(L,{prop:"category.name",width:"140",label:"分类"}),y(L,{prop:"title",label:"题干"}),c.islist?(h(),g(L,{key:0,type:"selection",selectable:w.selectableFunc,width:"44"},null,8,["selectable"])):_("",!0),c.islist?_("",!0):(h(),g(L,{key:1,width:"80",label:"单选"},{default:f((e=>[e.row.noChoose?(h(),g($,{key:0,size:"mini",onClick:t=>w.SingleFunc(e.row)},{default:f((()=>[C("选择")])),_:2},1032,["onClick"])):(h(),g($,{key:1,size:"mini",disabled:""},{default:f((()=>[C("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[U,q.loading]])]),b("div",x,[y(N,{onSizeChange:w.handleSizeChange,onCurrentChange:w.handleCurrentChange,background:"","current-page":q.curPage,"page-sizes":[2,10,20,50,100],"page-size":q.pageSize,layout:"total, prev, pager, next, jumper",total:q.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]])},data:()=>({isquestion:!1,questionType:1}),created(){},inject:["form"],methods:{addFunct(e){this.questionType=e,this.isquestion=!0},delClick(e,t){1==t?this.form.model.single.splice(e,1):2==t?this.form.model.many.splice(e,1):3==t&&this.form.model.judge.splice(e,1)},closeFunc(e){this.isquestion=!1,e.params&&e.params.length>0&&(1==this.questionType?e.params.forEach(((e,t)=>{this.form.model.single.length<this.form.model.single_number&&this.form.model.single.push(e)})):2==this.questionType?e.params.forEach(((e,t)=>{this.form.model.many.length<this.form.model.many_number&&this.form.model.many.push(e)})):3==this.questionType&&e.params.forEach(((e,t)=>{this.form.model.judge.length<this.form.model.judge_number&&this.form.model.judge.push(e)})))}}},F=b("div",{class:"common-form"},"单选试题",-1),I={class:"mb20"},T={class:"text-ellipsis"},$=b("div",{class:"common-form"},"多选试题",-1),E={class:"mb20"},L={class:"text-ellipsis"},P=b("div",{class:"common-form"},"判断试题",-1),N={class:"mb20"},Q={class:"text-ellipsis"};const U=c(V,[["render",function(e,t,l,a,i,o){const d=s,p=n,m=r,u=k("Question",!0);return h(),q("div",null,[F,b("div",I,[y(d,{class:"button-new-tag",size:"small",onClick:t[0]||(t[0]=e=>o.addFunct(1))},{default:f((()=>[C("+ 添加单选题")])),_:1})]),y(m,{class:"mb20",size:"small",data:o.form.model.single,border:"",style:{width:"100%"}},{default:f((()=>[y(p,{prop:"question_id",label:"ID"}),y(p,{prop:"category.name",label:"分类"}),y(p,{prop:"type_name",label:"题型"}),y(p,{prop:"browse_count",label:"题干"},{default:f((e=>[b("div",T,w(e.row.title),1)])),_:1}),y(p,{prop:"sort",label:"排序"}),y(p,{fixed:"right",label:"操作",width:"150"},{default:f((e=>[y(d,{onClick:t=>o.delClick(e.$index,1),type:"text",size:"small"},{default:f((()=>[C(" 删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),$,b("div",E,[y(d,{class:"button-new-tag",size:"small",onClick:t[1]||(t[1]=e=>o.addFunct(2))},{default:f((()=>[C("+ 添加多选题")])),_:1})]),y(m,{class:"mb20",size:"small",data:o.form.model.many,border:"",style:{width:"100%"}},{default:f((()=>[y(p,{prop:"question_id",label:"ID"}),y(p,{prop:"category.name",label:"分类"}),y(p,{prop:"type_name",label:"题型"}),y(p,{prop:"browse_count",label:"题干"},{default:f((e=>[b("div",L,w(e.row.title),1)])),_:1}),y(p,{prop:"sort",label:"排序"}),y(p,{fixed:"right",label:"操作",width:"150"},{default:f((e=>[y(d,{onClick:t=>o.delClick(e.$index,2),type:"text",size:"small"},{default:f((()=>[C(" 删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),P,b("div",N,[y(d,{class:"button-new-tag",size:"small",onClick:t[2]||(t[2]=e=>o.addFunct(3))},{default:f((()=>[C("+ 添加判断题")])),_:1})]),y(m,{class:"mb20",size:"small",data:o.form.model.judge,border:"",style:{width:"100%"}},{default:f((()=>[y(p,{prop:"question_id",label:"ID"}),y(p,{prop:"category.name",label:"分类"}),y(p,{prop:"type_name",label:"题型"}),y(p,{prop:"browse_count",label:"题干"},{default:f((e=>[b("div",Q,w(e.row.title),1)])),_:1}),y(p,{prop:"sort",label:"排序"}),y(p,{fixed:"right",label:"操作",width:"150"},{default:f((e=>[y(d,{onClick:t=>o.delClick(e.$index,3),type:"text",size:"small"},{default:f((()=>[C(" 删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),y(u,{isDisabled:!0,questionType:i.questionType,isquestion:i.isquestion,islist:!0,onCloseDialog:o.closeFunc},null,8,["questionType","isquestion","onCloseDialog"])])}]]);export{U as default};
