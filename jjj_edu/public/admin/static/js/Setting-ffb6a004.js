import{E as e,w as a,d as r,e as l,i as s,f as o,j as i,c as t}from"./element-plus-fe2e4fed.js";import{S as d}from"./sign-a60faa8e.js";import{U as n}from"./UE-87f17702.js";import{_ as m}from"./index-49a7d7a3.js";import{ae as p,o as c,c as u,P as _,S as f,a as g,W as v,Y as w,Q as b,a9 as h,bh as j,bf as V}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Upload-ecf46188.js";import"./AddCategory-1e090b14.js";import"./file-437a81f7.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const y={components:{Uediter:n},data(){return{ueditor:{text:"",config:{initialFrameWidth:400,initialFrameHeight:500}},form:{is_open:!1,is_increase:!1,increase_reward:0,no_increase:0,ever_sign:0,reward_data:[]},loading:!0,rules:{ever_sign:[{required:!0,message:"每日签到送积分有误",trigger:"blur"}],increase_reward:[{required:!0,message:"请输入第二天起递增积分数",trigger:"blur"}],no_increase:[{required:!0,message:"请输入第几天不再递增",trigger:"blur"}],reward_data:[{validator:(e,a,r)=>{a.length<1?r(new Error("请添加至少一项额外奖励！")):r()},required:!0,trigger:"blur"}],day:[{validator:(e,a,r)=>{this.form.reward_data.lenght<1||""===a&&r(new Error("天数不能为空！")),r()},required:!0,trigger:"blur"}],point:[{validator:(e,a,r)=>{""===a?r(new Error("请输入连续签到积分数！")):r()},required:!0,trigger:"blur"}]}}},created(){this.getData()},methods:{contentChangeFunc(e){this.ueditor.text=e},getData(){let e=this;e.loading=!0,d.getData().then((a=>{e.loading=!1;let r=a.data.vars.values;if(e.form.content=r.content,e.ueditor.text=r.content,e.form.is_increase=r.is_increase,e.form.is_open=r.is_open,e.form.increase_reward=r.increase_reward,e.form.no_increase=r.no_increase,e.form.ever_sign=r.ever_sign,r.reward_data){let a=r.reward_data.length;for(let e=0;e<a;e++){let a=r.reward_data[e];1==a.is_coupon?a.is_coupon=!0:a.is_coupon=!1,1==a.is_point?a.is_point=!0:a.is_point=!1}e.form.reward_data=r.reward_data}})).catch((e=>{}))},onSubmit(){let a=this,r=a.form;r.is_open&&(r.content=a.ueditor.text),a.loading=!0,a.$refs.ruleForm.validate((l=>{l&&d.saveData(r,!0).then((r=>{e({message:"恭喜你，保存成功",type:"success"}),a.getData()})).catch((e=>{}))}))},getContent:function(){return this.$refs.ue.getUEContent()},addReward(){this.form.reward_data.push({day:0,is_point:!1,point:0,is_coupon:!1,coupon:[]})},deleteRewardClick(e){this.form.reward_data.splice(e,1)}}},x=e=>(j("data-v-e9339d5b"),e=e(),V(),e),C={class:"open-sign"},U=x((()=>g("span",{class:"gray9"},"是否开启签到有礼",-1))),k={key:0,class:"mt16"},q=x((()=>g("div",{class:"common-form"},"每日签到固定奖励",-1))),z={class:"max-w460 d-s-c"},E={class:"flex-1"},F=x((()=>g("span",{class:"ml10"},"积分",-1))),D={class:"ww100"},R={key:0,class:"max-w460 border p-0-20 pt16 mt10"},S={class:"d-s-c"},P={class:"flex-1"},W=x((()=>g("span",{class:"ml10"},"积分",-1))),$={class:"d-s-c"},A={class:"flex-1"},B=x((()=>g("span",{class:"ml10"},"天起不再递增",-1))),G=x((()=>g("div",{class:"common-form"},"连续签到额外奖励 （达到额外奖励最大天数时，继续签到不会再获得额外奖励，断签后重新开始计算）",-1))),H={class:"reward-list max-w460"},I={class:"d-s-c"},Q={class:"flex-1"},Y=x((()=>g("span",{class:"ml10 pr16"},"天",-1))),J={class:"d-s-c"},K={key:0},L={class:"d-s-c"},M={class:"flex-1"},N=x((()=>g("span",{class:"ml10 pr16"},"积分",-1))),O={class:"ww100"},T=x((()=>g("div",{class:"common-form"},"规则",-1))),X={class:"edit_container"},Z={class:"common-button-wrapper"};const ee=m(y,[["render",function(e,d,n,m,j,V){const y=a,x=r,ee=l,ae=s,re=o,le=i,se=p("Uediter"),oe=t;return c(),u("div",null,[_(oe,{size:"small",model:j.form,rules:j.rules,ref:"ruleForm","label-width":"100px"},{default:f((()=>[g("div",C,[U,_(y,{modelValue:j.form.is_open,"onUpdate:modelValue":d[0]||(d[0]=e=>j.form.is_open=e),class:"ml10"},null,8,["modelValue"])]),j.form.is_open?(c(),u("div",k,[q,_(ee,{label:"每日签到送",prop:"ever_sign"},{default:f((()=>[g("div",z,[g("div",E,[_(x,{modelValue:j.form.ever_sign,"onUpdate:modelValue":d[1]||(d[1]=e=>j.form.ever_sign=e),placeholder:"0",type:"number"},null,8,["modelValue"])]),F])])),_:1}),_(ee,{label:"递增奖励"},{default:f((()=>[g("div",D,[_(ae,{modelValue:j.form.is_increase,"onUpdate:modelValue":d[2]||(d[2]=e=>j.form.is_increase=e),label:!0},{default:f((()=>[v("有")])),_:1},8,["modelValue"]),_(ae,{modelValue:j.form.is_increase,"onUpdate:modelValue":d[3]||(d[3]=e=>j.form.is_increase=e),label:!1},{default:f((()=>[v("无")])),_:1},8,["modelValue"])]),j.form.is_increase?(c(),u("div",R,[_(ee,{label:"第二天起递增奖励","label-width":"120px",prop:"increase_reward"},{default:f((()=>[g("div",S,[g("div",P,[_(x,{modelValue:j.form.increase_reward,"onUpdate:modelValue":d[4]||(d[4]=e=>j.form.increase_reward=e),placeholder:"请输入第二天起递增积分数",min:"0",type:"number"},null,8,["modelValue"])]),W])])),_:1}),_(ee,{label:"第","label-width":"120px",prop:"no_increase"},{default:f((()=>[g("div",$,[g("div",A,[_(x,{modelValue:j.form.no_increase,"onUpdate:modelValue":d[5]||(d[5]=e=>j.form.no_increase=e),placeholder:"请输入第几天不再递增",min:"0",type:"number"},null,8,["modelValue"])]),B])])),_:1})])):w("",!0)])),_:1}),G,_(ee,{label:"额外奖励"},{default:f((()=>[g("div",H,[(c(!0),u(b,null,h(j.form.reward_data,((e,a)=>(c(),u("div",{class:"reward-item pr border",key:a},[_(re,{class:"delete-reward",onClick:e=>V.deleteRewardClick(a),type:"danger",size:"small",icon:"CloseBold",circle:""},null,8,["onClick"]),_(ee,{label:"连续签到",prop:"reward_data."+a+".day",rules:j.rules.day},{default:f((()=>[g("div",I,[g("div",Q,[_(x,{modelValue:e.day,"onUpdate:modelValue":a=>e.day=a,placeholder:"请输入连续签到天数",class:"max-w460",type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),Y])])),_:2},1032,["prop","rules"]),_(ee,{label:"积分奖励"},{default:f((()=>[g("div",J,[g("div",null,[_(le,{modelValue:e.is_point,"onUpdate:modelValue":a=>e.is_point=a},null,8,["modelValue","onUpdate:modelValue"])]),e.is_point?(c(),u("div",K,[_(ee,{label:"送","label-width":"40px",prop:"reward_data."+a+".point",rules:j.rules.point,style:{"margin-bottom":"0"}},{default:f((()=>[g("div",L,[g("div",M,[_(x,{modelValue:e.point,"onUpdate:modelValue":a=>e.point=a,placeholder:"请输入连续签到天数的积分",type:"number",min:"0"},null,8,["modelValue","onUpdate:modelValue"])]),N])])),_:2},1032,["prop","rules"])])):w("",!0)])])),_:2},1024)])))),128))]),g("div",O,[_(re,{size:"small",icon:"Plus",onClick:V.addReward},{default:f((()=>[v("添加")])),_:1},8,["onClick"])])])),_:1}),T,_(ee,{label:"规则说明："},{default:f((()=>[g("div",X,[_(se,{text:j.ueditor.text,config:j.ueditor.config,ref:"ue",onContentChange:V.contentChangeFunc},null,8,["text","config","onContentChange"])])])),_:1})])):w("",!0),g("div",Z,[_(re,{type:"primary",size:"small",onClick:V.onSubmit,disabled:j.loading},{default:f((()=>[v("提交")])),_:1},8,["onClick","disabled"])])])),_:1},8,["model","rules"])])}],["__scopeId","data-v-e9339d5b"]]);export{ee as default};
