import{E as a,h as s,g as e,l,m as t,q as d,r,e as i,d as p,c as o,i as n,f as c,v as u}from"./element-plus-fe2e4fed.js";import{P as m}from"./points-4b84ae0c.js";import{_}from"./index-2e57a1f5.js";import{ap as v,$ as y,o as f,c as b,a as g,P as x,S as h,W as j,X as k,Y as w,Q as V,a9 as z,T as P}from"./@vue-0361ad4a.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";const C={components:{},data:()=>({active:0,loading:!0,detail:{pay_status:[],pay_type:[],delivery_type:[],user:{},address:[],product:[],order_status:[],store:[],express:[],delivery_status:[]},open_add:!1,pageSize:20,totalDataNumber:0,curPage:1,form:{express_id:null,express_no:""},extract_form:{order:{extract_status:1}},order:{},delivery_type:0,create_time:"",expressList:[]}),created(){this.getParams()},methods:{next(){this.active++>4&&(this.active=0)},getParams(){let a=this;const s=this.$route.query.order_id;m.orderdetail({order_id:s},!0).then((s=>{a.loading=!1,a.detail=s.data.detail,a.expressList=s.data.expressList})).catch((s=>{a.loading=!1}))},onSubmit(){let s=this,e=s.form;if(null==e.express_id)return void a.error("请选择物流公司");if(""==e.express_no)return void a.error("请填写物流单号");let l=this.$route.query.order_id;m.delivery({param:e,order_id:l},!0).then((e=>{s.loading=!1,a({message:"恭喜你，发货成功",type:"success"}),s.getParams()})).catch((a=>{s.loading=!1}))},onExtract(s){let e=this;e.extract_form;let l=s;m.extract({order_id:l},!0).then((s=>{e.loading=!1,a({message:"恭喜你，操作成功",type:"success"}),e.getParams()})).catch((a=>{e.loading=!1}))},cancelFunc(){this.$router.back(-1)}}},q={class:"pb50"},L={class:"product-content"},S=g("div",{class:"common-form"},"基本信息",-1),$={class:"table-wrap"},D={class:"pb16"},E=g("span",{class:"gray9"},"订单号：",-1),F={class:"pb16"},U=g("span",{class:"gray9"},"买家：",-1),I={class:"pb16"},N=g("span",{class:"gray9"},"兑换金额 (元)：",-1),O={class:"pb16"},Q=g("span",{class:"gray9"},"运费金额 (元)：",-1),T={class:"pb16"},W=g("span",{class:"gray9"},"实付款金额 (元)：",-1),X={class:"pb16"},Y=g("span",{class:"gray9"},"兑换积分：",-1),A={class:"pb16"},B=g("span",{class:"gray9"},"支付方式：",-1),G={class:"pb16"},H=g("span",{class:"gray9"},"配送方式：",-1),J={class:"pb16"},K=g("span",{class:"gray9"},"交易状态：",-1),M=g("div",{class:"common-form mt16"},"商品信息",-1),R={class:"table-wrap"},Z={class:"product-info"},aa={class:"pic"},sa={class:"info"},ea={class:"name"},la={key:0},ta=g("div",{class:"common-form mt16"},"收货信息",-1),da={class:"table-wrap"},ra={class:"pb16"},ia=g("span",{class:"gray9"},"收货人：",-1),pa={class:"pb16"},oa=g("span",{class:"gray9"},"收货电话：",-1),na={class:"pb16"},ca=g("span",{class:"gray9"},"收货地址：",-1),ua=g("div",{class:"common-form mt16"},"自提信息",-1),ma={class:"table-wrap"},_a={class:"pb16"},va=g("span",{class:"gray9"},"门店ID：",-1),ya={class:"pb16"},fa=g("span",{class:"gray9"},"门店名称：",-1),ba={class:"pb16"},ga=g("span",{class:"gray9"},"联系人：",-1),xa={class:"pb16"},ha=g("span",{class:"gray9"},"联系电话：",-1),ja={class:"pb16"},ka=g("span",{class:"gray9"},"门店地址：",-1),wa={key:2,class:"table-wrap"},Va=g("div",{class:"common-form mt16"},"付款信息",-1),za={class:"table-wrap"},Pa={class:"pb16"},Ca=g("span",{class:"gray9"},"应付款金额：",-1),qa={class:"pb16"},La=g("span",{class:"gray9"},"应付积分：",-1),Sa={class:"pb16"},$a=g("span",{class:"gray9"},"支付方式：",-1),Da={class:"pb16"},Ea=g("span",{class:"gray9"},"支付流水号：",-1),Fa={class:"pb16"},Ua=g("span",{class:"gray9"},"付款状态：",-1),Ia={class:"pb16"},Na=g("span",{class:"gray9"},"付款时间：",-1),Oa={key:3},Qa={key:0},Ta=g("div",{class:"common-form mt16"},"去发货",-1),Wa={key:1},Xa=g("div",{class:"common-form mt16"},"发货信息",-1),Ya={class:"table-wrap"},Aa={class:"pb16"},Ba=g("span",{class:"gray9"},"物流公司：",-1),Ga={class:"pb16"},Ha=g("span",{class:"gray9"},"物流单号：",-1),Ja={class:"pb16"},Ka=g("span",{class:"gray9"},"发货状态：",-1),Ma={class:"pb16"},Ra=g("span",{class:"gray9"},"发货时间：",-1),Za={key:4},as=g("div",{class:"common-form mt16"},"门店自提核销",-1),ss={key:0},es={key:1,class:"table-wrap"},ls={class:"pb16"},ts=g("span",{class:"gray9"},"自提门店名称：",-1),ds={class:"pb16"},rs=g("span",{class:"gray9"},"自提门店电话：",-1),is={class:"pb16"},ps=g("span",{class:"gray9"},"核销状态：",-1),os={class:"pb16"},ns=g("span",{class:"gray9"},"核销时间：",-1),cs={class:"common-button-wrapper"};const us=_(C,[["render",function(a,m,_,C,us,ms){const _s=s,vs=e,ys=l,fs=t,bs=d,gs=r,xs=i,hs=p,js=o,ks=n,ws=c,Vs=v("img-url"),zs=v("auth"),Ps=u;return y((f(),b("div",q,[g("div",L,[S,g("div",$,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",D,[E,j(" "+k(us.detail.order_no),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",F,[U,j(" "+k(us.detail.user.nickName)+" ",1),g("span",null,"用户ID：("+k(us.detail.user.user_id)+")",1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",I,[N,j(" "+k(us.detail.order_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",O,[Q,j(" "+k(us.detail.express_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",T,[W,j(" "+k(us.detail.pay_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",X,[Y,j(" "+k(us.detail.points_num),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",A,[B,j(" "+k(us.detail.pay_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",G,[H,j(" "+k(us.detail.delivery_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",J,[K,j(" "+k(us.detail.order_status.text),1)])])),_:1})])),_:1})]),M,g("div",R,[x(fs,{size:"small",data:us.detail.product,border:"",style:{width:"100%"}},{default:h((()=>[x(ys,{prop:"product_name",label:"商品"},{default:h((a=>[g("div",Z,[g("div",aa,[y(g("img",null,null,512),[[Vs,a.row.file_path]])]),g("div",sa,[g("div",ea,k(a.row.product_name),1)])])])),_:1}),x(ys,{prop:"product_price",label:"金额(元)"}),x(ys,{prop:"product_points",label:"积分"}),x(ys,{prop:"total_num",label:"兑换数量"},{default:h((a=>[g("p",null,"x "+k(a.row.total_num),1)])),_:1}),x(ys,{prop:"total_price",label:"商品总价"},{default:h((a=>[g("p",null,"金额：￥ "+k(a.row.total_price),1),g("p",null,"积分: "+k(a.row.points_num),1)])),_:1})])),_:1},8,["data"])]),10==us.detail.delivery_type.value?(f(),b("div",la,[ta,g("div",da,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",ra,[ia,j(" "+k(us.detail.address.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",pa,[oa,j(" "+k(us.detail.address.phone),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",na,[ca,j(" "+k(us.detail.address.detail),1)])])),_:1})])),_:1})])])):w("",!0),20==us.detail.delivery_type.value?(f(),b(V,{key:1},[ua,g("div",ma,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",_a,[va,j(" "+k(us.detail.store.shop_supplier_id),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ya,[fa,j(" "+k(us.detail.store.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ba,[ga,j(" "+k(us.detail.store.link_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",xa,[ha,j(" "+k(us.detail.store.link_phone),1)])])),_:1}),x(_s,{span:15},{default:h((()=>[g("div",ja,[ka,j(" "+k(us.detail.store.address),1)])])),_:1})])),_:1})])],64)):w("",!0),20==us.detail.pay_status.value?(f(),b("div",wa,[Va,g("div",za,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",Pa,[Ca,j(" "+k(us.detail.pay_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",qa,[La,j(" "+k(us.detail.points_num),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Sa,[$a,j(" "+k(us.detail.pay_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Da,[Ea,j(" "+k(us.detail.transaction_id),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Fa,[Ua,j(" "+k(us.detail.pay_status.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ia,[Na,j(" "+k(us.detail.pay_time),1)])])),_:1})])),_:1})])])):w("",!0),20==us.detail.pay_status.value&&10==us.detail.delivery_type.value&&-1===[20,21].indexOf(us.detail.order_status.value)?y((f(),b("div",Oa,[10==us.detail.delivery_status.value?(f(),b("div",Qa,[Ta,x(js,{size:"small",ref:"form",model:us.form,"label-width":"100px"},{default:h((()=>[x(xs,{label:"物流公司"},{default:h((()=>[x(gs,{modelValue:us.form.express_id,"onUpdate:modelValue":m[0]||(m[0]=a=>us.form.express_id=a),placeholder:"请选择快递公司"},{default:h((()=>[(f(!0),b(V,null,z(us.expressList,((a,s)=>(f(),P(bs,{label:a.express_name,key:s,value:a.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),x(xs,{label:"物流单号"},{default:h((()=>[x(hs,{modelValue:us.form.express_no,"onUpdate:modelValue":m[1]||(m[1]=a=>us.form.express_no=a),class:"max-w460"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):(f(),b("div",Wa,[Xa,g("div",Ya,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",Aa,[Ba,j(" "+k(us.detail.express.express_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ga,[Ha,j(" "+k(us.detail.express_no),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ja,[Ka,j(" "+k(us.detail.delivery_status.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ma,[Ra,j(" "+k(us.detail.delivery_time),1)])])),_:1})])),_:1})])]))])),[[zs,"/plus/points/order/delivery"]]):w("",!0),20==us.detail.delivery_type.value&&20==us.detail.pay_status.value&&21!=us.detail.order_status.value&&20!=us.detail.order_status.value?y((f(),b("div",Za,[as,10==us.detail.delivery_status.value?(f(),b("div",ss,[x(js,{size:"small",ref:"extract_form",model:us.extract_form,"label-width":"100px"},{default:h((()=>[x(xs,{label:"买家取货状态 "},{default:h((()=>[x(ks,{modelValue:us.extract_form.order.extract_status,"onUpdate:modelValue":m[2]||(m[2]=a=>us.extract_form.order.extract_status=a),label:1},{default:h((()=>[j("已取货")])),_:1},8,["modelValue"])])),_:1}),x(xs,null,{default:h((()=>[x(ws,{type:"primary",onClick:m[3]||(m[3]=a=>ms.onExtract(us.detail.order_id))},{default:h((()=>[j("确认核销")])),_:1})])),_:1})])),_:1},8,["model"])])):(f(),b("div",es,[g("template",null,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",ls,[ts,j(" "+k(us.detail.store.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ds,[rs,j(" "+k(us.detail.store.link_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",is,[ps,20==us.detail.delivery_status.value?(f(),b(V,{key:0},[j(" 已核销 ")],64)):w("",!0)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",os,[ns,j(" "+k(us.detail.delivery_time),1)])])),_:1})])),_:1})])]))])),[[zs,"/plus/points/order/extract"]]):w("",!0)]),g("div",cs,[x(ws,{size:"small",type:"info",onClick:ms.cancelFunc},{default:h((()=>[j("返回上一页")])),_:1},8,["onClick"]),20==us.detail.pay_status.value&&10==us.detail.delivery_type.value&&-1===[20,21].indexOf(us.detail.order_status.value)?(f(),b(V,{key:0},[10==us.detail.delivery_status.value?(f(),P(ws,{key:0,size:"small",type:"primary",onClick:ms.onSubmit},{default:h((()=>[j("确认发货 ")])),_:1},8,["onClick"])):w("",!0)],64)):w("",!0)])])),[[Ps,us.loading]])}]]);export{us as default};
