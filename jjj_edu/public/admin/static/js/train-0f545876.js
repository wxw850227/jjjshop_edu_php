import{E as e,q as l,r as a,e as t,d as i,f as o,c as s,l as n,m as d,n as r,o as c,v as u}from"./element-plus-fe2e4fed.js";import{D as g}from"./data-97822b17.js";import{_ as h}from"./index-2e57a1f5.js";import{o as m,T as p,S as f,a as b,P as C,W as y,c as _,Q as k,a9 as S,Y as v,$ as z}from"./@vue-0361ad4a.js";const V={class:"common-seach-wrap"},w={class:"lecturer-content"},x={class:"table-wrap"},I=["src"],D={class:"pagination"},L={class:"dialog-footer"};const F=h({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},cateList:[],lecturerList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isLecturer","excludeIds","islist"],watch:{isLecturer:function(e,l){e!=l&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,l=e.formInline;l.page=e.curPage,l.list_rows=e.pageSize,g.lecturerList(l,!0).then((l=>{1==l.code&&(e.loading=!1,e.cateList=l.data.category,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?l.data.list.data.forEach((l=>{e.excludeIds.indexOf(l.lecturer_id)>-1?l.noChoose=!1:l.noChoose=!0})):e.islist||l.data.list.data.forEach((e=>{e.noChoose=!0})),e.lecturerList=l.data.list.data,e.totalDataNumber=l.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let l=this,a=null;l.multipleSelection.length<1?e({message:"请至少选择一位讲师！",type:"error"}):(l.islist&&void 0!==l.islist?(l.multipleSelection.forEach((e=>{e.image=e.image.file_path})),a=l.multipleSelection):(a=l.multipleSelection[0],a.image=a.image.file_path),l.params=a,l.type="success",l.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,g,h,F,P,E){const j=l,N=a,U=t,T=i,W=o,$=s,O=n,q=d,Q=r,Y=c,A=u;return m(),p(Y,{title:"选择讲师",modelValue:P.dialogVisible,"onUpdate:modelValue":g[3]||(g[3]=e=>P.dialogVisible=e),onClose:E.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:f((()=>[b("div",L,[C(W,{size:"small",onClick:g[2]||(g[2]=e=>P.dialogVisible=!1)},{default:f((()=>[y("取 消")])),_:1}),C(W,{size:"small",type:"primary",onClick:E.addClerk},{default:f((()=>[y("确 定")])),_:1},8,["onClick"])])])),default:f((()=>[b("div",V,[C($,{inline:!0,size:"small",model:P.formInline,class:"demo-form-inline"},{default:f((()=>[C(U,{label:"讲师分类"},{default:f((()=>[C(N,{modelValue:P.formInline.category_id,"onUpdate:modelValue":g[0]||(g[0]=e=>P.formInline.category_id=e),placeholder:"请选择讲师分类"},{default:f((()=>[(m(!0),_(k,null,S(P.cateList,(e=>(m(),_(k,{key:e.category_id},[C(j,{value:0,label:"全部"}),C(j,{value:e.category_id,label:e.name},null,8,["value","label"]),void 0!==e.child?(m(!0),_(k,{key:0},S(e.child,(e=>(m(),_(k,{key:e.category_id},[C(j,{value:e.category_id,label:e.name,style:{"padding-left":"30px"}},null,8,["value","label"]),void 0!==e.child?(m(!0),_(k,{key:0},S(e.child,(e=>(m(),p(j,{key:e.category_id,value:e.category_id,label:e.name,style:{"padding-left":"60px"}},null,8,["value","label"])))),128)):v("",!0)],64)))),128)):v("",!0)],64)))),128))])),_:1},8,["modelValue"])])),_:1}),C(U,{label:"讲师名称"},{default:f((()=>[C(T,{placeholder:"请输入讲师名称",modelValue:P.formInline.search,"onUpdate:modelValue":g[1]||(g[1]=e=>P.formInline.search=e)},null,8,["modelValue"])])),_:1}),C(U,{label:""},{default:f((()=>[C(W,{icon:"Search",onClick:E.getData},{default:f((()=>[y("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),b("div",w,[b("div",x,[z((m(),p(q,{size:"small",data:P.lecturerList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:E.tableCurrentChange},{default:f((()=>[C(O,{width:"70",label:"讲师图片"},{default:f((e=>[b("img",{src:e.row.image.file_path,width:"30",height:"30"},null,8,I)])),_:1}),C(O,{prop:"name",label:"讲师名称"}),C(O,{prop:"category.name",width:"100",label:"讲师分类"}),C(O,{prop:"create_time",width:"140",label:"添加时间"}),h.islist?(m(),p(O,{key:0,type:"selection",selectable:E.selectableFunc,width:"44"},null,8,["selectable"])):v("",!0),h.islist?v("",!0):(m(),p(O,{key:1,width:"80",label:"单选"},{default:f((e=>[e.row.noChoose?(m(),p(W,{key:0,size:"mini",onClick:l=>E.SingleFunc(e.row)},{default:f((()=>[y("选择")])),_:2},1032,["onClick"])):(m(),p(W,{key:1,size:"mini",disabled:""},{default:f((()=>[y("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[A,P.loading]])]),b("div",D,[C(Q,{onSizeChange:E.handleSizeChange,onCurrentChange:E.handleCurrentChange,background:"","current-page":P.curPage,"page-sizes":[2,10,20,50,100],"page-size":P.pageSize,layout:"total, prev, pager, next, jumper",total:P.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]),P={class:"common-seach-wrap"},E={class:"lecturer-content"},j={class:"table-wrap"},N=["src"],U={class:"pagination"},T={class:"dialog-footer"};const W=h({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{category_id:0},cateList:[],lecturerList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isTrain","excludeIds","islist"],watch:{isTrain:function(e,l){e!=l&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,l=e.formInline;l.paper_type=1,l.page=e.curPage,l.list_rows=e.pageSize,g.paperList(l,!0).then((l=>{1==l.code&&(e.loading=!1,e.cateList=l.data.category,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?l.data.list.data.forEach((l=>{e.excludeIds.indexOf(l.paper_id)>-1?l.noChoose=!1:l.noChoose=!0})):e.islist||l.data.list.data.forEach((e=>{e.noChoose=!0})),e.lecturerList=l.data.list.data,e.totalDataNumber=l.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let l=this,a=null;l.multipleSelection.length<1?e({message:"请至少选择一个练习！",type:"error"}):(l.islist&&void 0!==l.islist?(l.multipleSelection.forEach((e=>{e.image=e.image.file_path})),a=l.multipleSelection):(a=l.multipleSelection[0],a.image=a.image.file_path),l.params=a,l.type="success",l.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,g,h,V,w,x){const I=l,D=a,L=t,F=i,W=o,$=s,O=n,q=d,Q=r,Y=c,A=u;return m(),p(Y,{title:"选择练习",modelValue:w.dialogVisible,"onUpdate:modelValue":g[3]||(g[3]=e=>w.dialogVisible=e),onClose:x.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:f((()=>[b("div",T,[C(W,{size:"small",onClick:g[2]||(g[2]=e=>w.dialogVisible=!1)},{default:f((()=>[y("取 消")])),_:1}),C(W,{size:"small",type:"primary",onClick:x.addClerk},{default:f((()=>[y("确 定")])),_:1},8,["onClick"])])])),default:f((()=>[b("div",P,[C($,{inline:!0,size:"small",model:w.formInline,class:"demo-form-inline"},{default:f((()=>[C(L,{label:"练习分类"},{default:f((()=>[C(D,{modelValue:w.formInline.category_id,"onUpdate:modelValue":g[0]||(g[0]=e=>w.formInline.category_id=e),placeholder:"请选择练习分类"},{default:f((()=>[C(I,{value:0,label:"全部"}),(m(!0),_(k,null,S(w.cateList,(e=>(m(),_(k,{key:e.category_id},[C(I,{value:e.category_id,label:e.name},null,8,["value","label"]),void 0!==e.child?(m(!0),_(k,{key:0},S(e.child,(e=>(m(),_(k,{key:e.category_id},[C(I,{value:e.category_id,label:e.name,style:{"padding-left":"30px"}},null,8,["value","label"]),void 0!==e.child?(m(!0),_(k,{key:0},S(e.child,(e=>(m(),p(I,{key:e.category_id,value:e.category_id,label:e.name,style:{"padding-left":"60px"}},null,8,["value","label"])))),128)):v("",!0)],64)))),128)):v("",!0)],64)))),128))])),_:1},8,["modelValue"])])),_:1}),C(L,{label:"练习名称"},{default:f((()=>[C(F,{placeholder:"请输入练习名称",modelValue:w.formInline.search,"onUpdate:modelValue":g[1]||(g[1]=e=>w.formInline.search=e)},null,8,["modelValue"])])),_:1}),C(L,{label:""},{default:f((()=>[C(W,{icon:"Search",onClick:x.getData},{default:f((()=>[y("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),b("div",E,[b("div",j,[z((m(),p(q,{size:"small",data:w.lecturerList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:x.tableCurrentChange},{default:f((()=>[C(O,{width:"70",label:"练习图片"},{default:f((e=>[b("img",{src:e.row.image.file_path,width:"30",height:"30"},null,8,N)])),_:1}),C(O,{prop:"title",label:"练习名称"}),C(O,{prop:"category.name",width:"100",label:"练习分类"}),C(O,{prop:"create_time",width:"140",label:"添加时间"}),h.islist?(m(),p(O,{key:0,type:"selection",selectable:x.selectableFunc,width:"44"},null,8,["selectable"])):v("",!0),h.islist?v("",!0):(m(),p(O,{key:1,width:"80",label:"单选"},{default:f((e=>[e.row.noChoose?(m(),p(W,{key:0,size:"mini",onClick:l=>x.SingleFunc(e.row)},{default:f((()=>[y("选择")])),_:2},1032,["onClick"])):(m(),p(W,{key:1,size:"mini",disabled:""},{default:f((()=>[y("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[A,w.loading]])]),b("div",U,[C(Q,{onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange,background:"","current-page":w.curPage,"page-sizes":[2,10,20,50,100],"page-size":w.pageSize,layout:"total, prev, pager, next, jumper",total:w.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{F as _,W as a};
