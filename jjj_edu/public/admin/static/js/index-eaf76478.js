import{_ as e}from"./Setlink-3841cc23.js";import{_ as l}from"./Upload-78ee26ae.js";import{E as a,w as s,e as o,d as t,i,f as r,g as m,c as p}from"./element-plus-fe2e4fed.js";import{r as d,_ as n}from"./index-2e57a1f5.js";import{o as u,c as f,P as c,S as h,W as k,T as y,Y as _,a as g}from"./@vue-0361ad4a.js";import"./data-97822b17.js";import"./AddCategory-c921a3c2.js";import"./file-56305e6b.js";import"./lodash-es-3593bb86.js";import"./async-validator-cf877c1f.js";import"./@vueuse-19751edd.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-1634e2d0.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-64e93849.js";import"./pinia-3f36854e.js";import"./axios-15f6fe35.js";import"./qs-c6aa5595.js";import"./side-channel-b02c3a2b.js";import"./object-inspect-bd98d4ca.js";import"./vue-clipboard2-259f629a.js";import"./clipboard-e6665d4e.js";import"./vue-ueditor-wrap-f5452c05.js";let j={getData:(e,l)=>d._get("/shop/plus.homepush/index",e,l),saveData:(e,l)=>d._post("/shop/plus.homepush/index",e,l)};const b={components:{Upload:l,Setlink:e},data:()=>({form:{is_open:!1,name:"",des:"查看详情",title:"",remark:"",link:"",type:"1",image_id:0,file_path:""},loading:!1,isupload:!1,is_linkset:!1}),created(){this.getData()},methods:{openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&(this.form.file_path=e[0].file_path,this.form.image_id=e[0].file_id),this.isupload=!1},getData(){let e=this;j.getData().then((l=>{e.form=l.data.vars.values,"true"==e.form.is_open&&(e.form.is_open=!0)})).catch((e=>{}))},onSubmit(){let e=this,l=e.form;if(l.is_open&&!e.checkData(l))return!1;e.loading=!0,j.saveData(l,!0).then((l=>{e.loading=!1,1==l.code&&(a({message:"恭喜你，保存成功",type:"success"}),e.getData())})).catch((l=>{e.loading=!1}))},changeLink(){this.is_linkset=!0},closeLinkset(e){this.is_linkset=!1,this.form.link=e},checkData(e){if(1==e.type){if(!e.title)return a({message:"标题不能为空",type:"error"}),!1;if(!e.des||!e.remark)return!1}return e.type<3&&!e.link?(a({message:"请选择跳转链接",type:"error"}),!1):e.image_id>0||(a({message:"请上传图片",type:"error"}),!1)}}},V={class:"pb50"},x=g("div",{class:"gray"},"建议换活动，此名称更换，商城首页弹窗根据此名称不同来弹窗",-1),v={key:0},w={key:0,class:"img mt10"},U=["src"],D={class:"gray"},C={key:0},q={key:1},L={class:"common-button-wrapper"};const S=n(b,[["render",function(a,d,n,j,b,S){const z=s,I=o,F=t,R=i,A=r,E=m,M=p,P=l,T=e;return u(),f("div",V,[c(M,{size:"small",ref:"form",model:b.form,"label-width":"100px"},{default:h((()=>[c(I,{label:"开启首页推送",prop:"is_open"},{default:h((()=>[c(z,{modelValue:b.form.is_open,"onUpdate:modelValue":d[0]||(d[0]=e=>b.form.is_open=e)},null,8,["modelValue"])])),_:1}),c(I,{label:"活动名称",rules:[{required:!0,message:" "}],prop:"name"},{default:h((()=>[c(F,{class:"max-w460",modelValue:b.form.name,"onUpdate:modelValue":d[1]||(d[1]=e=>b.form.name=e),placeholder:"",type:"text"},null,8,["modelValue"]),x])),_:1}),b.form.is_open?(u(),f("div",v,[c(I,{label:"类型"},{default:h((()=>[c(R,{modelValue:b.form.type,"onUpdate:modelValue":d[2]||(d[2]=e=>b.form.type=e),label:"1"},{default:h((()=>[k("图文")])),_:1},8,["modelValue"]),c(R,{modelValue:b.form.type,"onUpdate:modelValue":d[3]||(d[3]=e=>b.form.type=e),label:"2"},{default:h((()=>[k("纯图")])),_:1},8,["modelValue"])])),_:1}),1==b.form.type?(u(),y(I,{key:0,label:"标题",rules:[{required:!0,message:" "}],prop:"title"},{default:h((()=>[c(F,{modelValue:b.form.title,"onUpdate:modelValue":d[4]||(d[4]=e=>b.form.title=e),placeholder:"请输入标题",class:"max-w460"},null,8,["modelValue"])])),_:1})):_("",!0),c(I,{label:"弹窗图片"},{default:h((()=>[c(E,null,{default:h((()=>[c(A,{icon:"Upload",onClick:S.openUpload},{default:h((()=>[k("选择图片")])),_:1},8,["onClick"]),b.form.image_id>0?(u(),f("div",w,[g("img",{src:b.form.file_path,width:"100",height:"100"},null,8,U)])):_("",!0)])),_:1}),g("div",D,[k("图片为2M以内大小，格式限png，jpg格式 "),1==b.form.type?(u(),f("span",C,"建议尺寸：600x300；")):_("",!0),2==b.form.type?(u(),f("span",q,"建议尺寸：600x420；")):_("",!0)])])),_:1}),1==b.form.type?(u(),y(I,{key:1,label:"按钮文案",rules:[{required:!0,message:" "}],prop:"des"},{default:h((()=>[c(F,{class:"max-w460",modelValue:b.form.des,"onUpdate:modelValue":d[5]||(d[5]=e=>b.form.des=e),placeholder:"",type:"text"},null,8,["modelValue"])])),_:1})):_("",!0),1==b.form.type?(u(),y(I,{key:2,label:"简介说明",rules:[{required:!0,message:" "}],prop:"remark"},{default:h((()=>[c(F,{type:"textarea",rows:2,max:"100",placeholder:"请输入说明",modelValue:b.form.remark,"onUpdate:modelValue":d[6]||(d[6]=e=>b.form.remark=e),class:"max-w460"},null,8,["modelValue"])])),_:1})):_("",!0),b.form.type<3?(u(),y(I,{key:3,label:"跳转地址",rules:[{required:!0,message:" "}],prop:"link"},{default:h((()=>[b.form.link?(u(),y(F,{key:0,class:"max-w460",placeholder:"点击选择你要链接的位置","model-value":"链接到"+b.form.link.type+" "+b.form.link.name,disabled:!0},null,8,["model-value"])):_("",!0),b.form.link?_("",!0):(u(),y(F,{key:1,class:"max-w460",placeholder:"点击选择你要链接的位置",disabled:!0})),c(A,{icon:"Link",class:"ml10",onClick:S.changeLink},{default:h((()=>[k("选择链接")])),_:1},8,["onClick"])])),_:1})):_("",!0)])):_("",!0),g("div",L,[c(A,{size:"small",type:"primary",onClick:S.onSubmit,loading:b.loading},{default:h((()=>[k("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),b.isupload?(u(),y(P,{key:0,isupload:b.isupload,type:a.type,onReturnImgs:S.returnImgsFunc},{default:h((()=>[k("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):_("",!0),b.is_linkset?(u(),y(T,{key:1,is_linkset:b.is_linkset,onCloseDialog:S.closeLinkset},{default:h((()=>[k("选择链接")])),_:1},8,["is_linkset","onCloseDialog"])):_("",!0)])}]]);export{S as default};
